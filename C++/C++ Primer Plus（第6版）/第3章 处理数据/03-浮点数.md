[toc]

### 1. 书写浮点数

C++ 有两种书写浮点数的方式。第一种是使用常用的标准小数点表示法：

```console
12.34	// floating-point
939001.32	// floating-point
0.00023	// floating-point
8.0	// still floating-point
```

第二种表示浮点值的方法叫做 E 表示法。下面是一些例子：

```console
2.52e+8				// can use E or e, + is optional
8.33E-4				// exponent can be negative
7E5					// same as 7.0E+05
-18.32e13			// can have + or - sign in front
```

E 表示法确保数字以浮点格式存储，即使没有小数点。注意，既可以使用 E 也可以使用 e，指数可以是正数也可以是负数。然而，数字中不能有空格，因此 7.2 E6 是非法的。

### 2. 浮点类型

和 ANSI C 一样，C++ 也有 3 种浮点类型：float、double 和 long double。

事实上，C 和 C++ 对于有效位数的要求是，float 至少 32 位，double 至少 48 位，且不少于 float，long double 至少和 double 一样多。可以从头文件 cfloat 或 float.h 中找到系统的限制。

参数 ios_base::fixed 和 ios_base::floatfield 是通过包含 iostream 来提供的常量。

程序清单 **3.8 floatnum.cpp**

```cpp
// floatnum.cpp -- floating-point types
#include <iostream>

int main()
{
	using namespace std;
	cout.setf(ios_base::fixed, ios_base::floatfield);	// fixed-point
	float tub = 10.0 / 3.0;	// good to about 6 places
	double mint = 10.0 / 3.0;	// good to about 15 places
	const float million = 1.0e6;

	cout << "tub = " << tub;
	cout << ", a million tubs = " << million * tub;
	cout << ", \nand ten million tubs = ";
	cout << 10 * million * tub << endl;

	cout << "mint = " << mint << " and a million mints = ";
	cout << million * mint << endl;
	return 0;
}
```

下面是该程序的输出：

```console
tub = 3.333333, a million tubs = 3333333.250000,
and ten million tubs = 33333332.000000
mint = 3.333333 and a million mints = 3333333.333333
```

### 3. 浮点常量

在默认情况下，像 8.24 和 2.4E8 这样的浮点常量都属于 double 类型。如果希望常量为 float 类型，请使用 f 或 F 后缀。对于 long double 类型，可使用 l 或 L 后缀。下面是一些例子：

```console
1.234f		// a float constant
2.45E20F 	// a float constant
2.345324E28	// a double constant
2.2L		// a long double constant
```

### 4. 浮点数的优缺点

与整数相比，浮点数有两大优点。首先，它们可以表示整数之间的值。其次，由于有缩放因子，它们可以表示的范围大得多。另一方面，浮点运算的速度通常比整数运算慢，且精度将降低。

程序清单 **3.9 fltadd.cpp**

```cpp
// fltadd.cpp -- precision problems with float
#include <iostream>

int main()
{
	using namespace std;
	float a = 2.34E+22f;
	float b = a + 1.0f;

	cout << "a = " << a << endl;
	cout << "b - a = " << b - a << endl;
	return 0;
}
```

下面i某个系统上运行时该程序的输出：

```console
a = 2.34e+22
b - a = 0
```

C++ 对基本类型进行分类，形成了若干个族。类型 signed char、short、int 和 long 统称为符号整型：它们的无符号版本统称为无符号整型；C++ 11 新增了 long long。bool、char、wchar_t、符号整数和无符号整型统称为整型；C++ 11 新增了 char16_t 和 char32_t。float、double 和 long double 统称为浮点型。整数和浮点型统称算术类型。
[toc]

在 Java 中，使用算术运算符 `+`、`-`、`*`、`/` 表示加、减、乘、除运算。当参与 `/` 运算符的两个操作数都是整数时，表示整数除法；否则，表示浮点除法。整数的求余操作（有时称为取模）用 `%` 表示。

需要注意，整数被 0 除将会产生一个异常，而浮点数被 0 除将会得到无穷大或 NaN 结果。

可以在赋值语句中采用一种简化的格式书写二元算术运算符。例如：

```java
x += 4;
```

等价于：

```java
x = x + 4;
```

> 注释：double 类型使用 64 位存储一个 double 数值，而有些处理器使用 80 位浮点寄存器。这些寄存器增加了中间过程的计算精度。例如，下列运算：
>
> ```java
> double w = x * y / z;
> ```
>
> 很多 Intel 处理器计算 x * y，并且将结果存储在 80 位的寄存器中，再除以 z 并将结果截断为 64 位。这样可以得到一个更加精确的计算结果，并且还能够避免产生指数溢出。但是，这个结果可能与始终在 64 位机器上计算的结果不一样。因此，Java 虚拟机的最初规范规定所有的中间计算都必须进行截断。这种行为遭到了数值计算团体的反对。为此，Java 程序设计语言承认了最优性能与理想结果之间存在的冲突，并给予了改进。在默认情况下，虚拟机设计者允许将中间计算结果采用扩展的精度。但是，对于使用 `strictfp` 关键字标记的方法必须使用严格的浮点计算来产生理想的结果。例如，可以把 main 方法标记为 :
>
> ```java
> public static strictfp void main(String[] args)
> ```
>
> 于是，在 main 方法中的所有指令都将使用严格的浮点计算。如果将一个类标记为 strictfp，这个类中所有方法都要使用严格的浮点计算。

### 1. 自增运算符与自减运算符

`n++` 将变量 n 的当前值加1；`n--` 将 n 的值减 1。

实际上，这两个运算符有两种形式。上面介绍的是运算符放在操作数后面的 "后缀" 形式，还有一种 "前缀" 形式， `++n`。两种方式都是对变量值加 1。但在表达式中，这两种形式就有区别了。前缀方式先进行加 1运算；后缀方式则使用变量原来的值。

```java
int m = 7;
int n = 7;
int a = 2 * ++m;	// now a is 17, m is 8
int b = 2 * n++;	// now b is 14, n is 8
```

我们建议不要在其他表达式的内部使用 `++`。

### 2. 关系运算符与 boolean 运算符

Java 包含各种关系运算符。其中，使用两个等号 `==` 检测是否相等。使用 `!=` 检测是否不相等。另外，经常使用运算符还有 `<`（小于）、`>` （大于）、`<=`（小于等于）、`>=` （大于等于）。用 `&&` 表示逻辑  "与"、用 `||` 表示逻辑 "或"，`!` 表示逻辑 "非"。`&&` 和 `||` 是按照 "短路" 方式求值的。如果第一个操作数已经能够确定表达式的值，第二个操作数就不必计算了。

最后，Java 支持三元操作 `?:`。

```java
condition ? expression1 : expression2
```

当条件 condition 为真时计算第 1 个表达式，否则计算第 2 个表达式。

### 3. 位运算符

位运算符包括：

`&`（与）、`|`（或）、`^`（异或）、`~`（非）

> 注释：`&` 和 `|` 运算符应用于布尔值，得到的结果也是布尔值。这两个运算符与 `&&` 和 `||` 的运算非常相似，只是不按 "短路" 方式计算。即在得到计算结果之前，一定要计算两个操作数的值。

另外，`>>` 和 `<<` 运算符将二进制位进行右移或左移操作。

最后，`>>>` 运算符将用 0 填充高位；`>>` 运算符用符号为填充高位。没有 `<<<` 运算符。

### 4. 数学函数与常量

在 Math 类中，包含了各种各样的数学函数和常量。

> 提示：从 JDK 5.0 开始，不必在数学方法名和常量名前添加前缀 "Math."，而只要在源文件的顶部加上下列内容就可以了。
>
> ```java
> import static java.lang.Math.*;
> ```
>
> 以后就可以像下面使用 Math 中的函数了：
>
> ```java
> System.out.println("The square root of \u03C0 is " + sqrt(PI));
> ```

> 注释：在 Math 类中，为了达到最快的性能，所有的方法都使用计算机浮点单元中的例程。如果得到一个完全可预测的结果比运行速度更重要的话，那么就应该使用 StrictMath 类。

### 5. 数值类型之间的转换

```java
int n = 123456789;
float f = n;	// f is 1.2345679E8
```

当使用上面两个数值进行二元操作时（例如 n + f，n 是整数， f 是浮点数），先要将两个操作数转换为同一种类型，然后在进行计算。

+ 如果两个操作数中有一个是 double 类型的，另一个操作数就会转换为 double 类型。
+ 否则，如果其中一个操作数是 float 类型，另一个操作数将会转换为 float 类型。
+ 否则，如果其中一个操作数是 long 类型，另一个操作数将会转换为 long 类型。
+ 否则，两个操作数都将被转换为 int 类型。

### 6. 强制类型转换

强制类型转换的语法格式是在圆括号中给出想要转换的目标类型，后面紧跟待转换的变量名。例如：

```java
double x = 9.997;
int nx = (int) x;
```

如果想对浮点数进行舍入运算，以便得到最接近的整数，那就需要使用 Math.round 方法：

```java
double x = 9.997;
int nx = (int)Math.round(x);
```

> 注释：不要在 boolean 类型与任何数值类型之间进行强制类型转换，这样可以防止发生错误。只有极少数的情况才需要将布尔类型转换为数值类型，这时可以使用条件表达式：b ? 1 : 0。

### 7. 括号与运算符级别

<center><b>表3-4 运算符优先级</b></center>

| 运算符                                                       | 结合性   |
| ------------------------------------------------------------ | -------- |
| [ ]  .  ( )  (方法调用)                                      | 从左向右 |
| !  ~  ++  --  +（一元运算） -（一元运算） ( )（强制类型转换）  new | 从右向左 |
| *  /  %                                                      | 从左向右 |
| +  -                                                         | 从左向右 |
| <<  >>  >>>                                                  | 从左向右 |
| <  <=  >  >=  instanceof                                     | 从左向右 |
| ==  !=                                                       | 从左向右 |
| &                                                            | 从左向右 |
| ^                                                            | 从左向右 |
| \|                                                           | 从左向右 |
| &&                                                           | 从左向右 |
| \|\|                                                         | 从左向右 |
| ?:                                                           | 从右向左 |
| =  +=  -=  *=  /=  %=  &=  \|=  ^=  <<=  >>=  >>>=           | 从右向左 |

### 8. 枚举类型

从 JDK 5.0 开始，可以自定义枚举类型。枚举类型包括有限个命名的值。例如，

```java
enum Size { SMALL, MEDIUM, LARGE, EXTRA_LARGE };
```

现在，可以声明这样一种类型的变量：

```java
Size s = Size.MEDIUM;
```

Size 类型的变量只能存储这个类型声明中给定的某个枚举值，或者 null 值， null 表示这个变量没有设置任何值。
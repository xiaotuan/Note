当在 `C` 和 `Java` 之间传递数字时，应该知道它们彼此之间的对应类型。

<center>Java 数据类型和 C 数据类型</center>

| Java 编程语言 | C 编程语言 | 字节 | Java 编程语言 | C 编程语言 | 字节 |
| ------------- | ---------- | ---- | ------------- | ---------- | ---- |
| boolean       | jboolean   | 1    | int           | jint       | 4    |
| byte          | jbyte      | 1    | long          | jlong      | 8    |
| char          | jchar      | 2    | float         | jfloat     | 4    |
| short         | jshort     | 2    | double        | jdouble    | 8    |

在头文件 `jni.h` 中，这些类型被 `typedef` 语句声明为在目标平台上等价的类型。该头文件还定义了常量 `JNI_FALSE = 0` 和 `JNI_TRUE= 1`。

**示例程序：**

**Printf1.java**

```java
package com.qty;

public class Printf1 {

    public static native int print(int width, int precision, double x);

}
```

**Printf1Test.java**

```java
package com.qty;

public class Printf1Test {

    public static void main(String[] args) {
        int count = Printf1.print(8, 4, 3.14);
        count += Printf1.print(8, 4, count);
        System.out.println();
        for (int i = 0; i < count; i++) {
            System.out.print("-");
        }
        System.out.println();
    }

    static {
        System.loadLibrary("libs/Printf1");
    }

}
```

**com_qty_Printf1.h**

```c
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class com_qty_Printf1 */

#ifndef _Included_com_qty_Printf1
#define _Included_com_qty_Printf1
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     com_qty_Printf1
 * Method:    print
 * Signature: (IID)I
 */
JNIEXPORT jint JNICALL Java_com_qty_Printf1_print
  (JNIEnv *, jclass, jint, jint, jdouble);

#ifdef __cplusplus
}
#endif
#endif
```

**com_qty_Printf1.c**

```c
#include <stdio.h>
#include "com_qty_Printf1.h"

#ifdef __cplusplus
extern "C" {
#endif

#pragma warning(disable : 4996)

JNIEXPORT jint JNICALL Java_com_qty_Printf1_print
  (JNIEnv *env, jclass cl, jint width, jint precision, jdouble x)
{
    char fmt[30];
    jint ret;
    sprintf(fmt, "%%%d.%df", width, precision);
    ret = printf(fmt, x);
    fflush(stdout);
    return ret;
}

#ifdef __cplusplu
}
#endif

```

运行结果如下：

```shell
"C:\Program Files\Java\jdk-11.0.14\bin\java.exe" "-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA Community Edition 2023.3.3\lib\idea_rt.jar=61239:C:\Program Files\JetBrains\IntelliJ IDEA Community Edition 2023.3.3\bin" -Dfile.encoding=UTF-8 -classpath C:\WorkSpace\JavaSpace\Printf1\out\production\Printf1 com.qty.Printf1Test
  3.1400  8.0000
----------------

Process finished with exit code 0
```


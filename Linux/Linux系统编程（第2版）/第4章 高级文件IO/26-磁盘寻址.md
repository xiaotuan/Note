### 4.6.1　磁盘寻址

为了理解I/O调度器的工作机制，首先需要了解一些背景知识。硬盘基于用柱面（cylinders）、磁头（heads）和扇区（section）几何寻址方式来获取数据，这种方式也被称为CHS寻址。每个硬盘都是由多个盘片（platter）组成，每个盘片包括一个磁盘、一个主轴和一个读写头。你可以把每个盘片看作一个CD，硬盘上所有盘片看作一摞CD。每个盘片又分成很多环状的磁道，就像CD上一样。每个磁道分为整数倍个扇区。

为了定位某个特定数据单元在磁盘上的位置，驱动程序需要知道三个信息：柱面、磁头和扇区的值。柱面值指定了数据在哪个磁道上。如果把盘片放成一摞，磁道在所有盘片上构成了一个柱面。换句话说，一个柱面是由所有盘片上离盘中心相同距离的磁道组成的。磁头值表示准确的读写头（即准确的盘片）。查找先是定位到了单个盘片上的单个磁道。然后，磁盘驱动利用扇区找到磁道上准确扇区。现在，查找完成：硬盘驱动知道了应该在哪个盘片，哪个磁道，哪个扇区来查找数据。然后定位读写头到正确的盘片上正确的磁道，从正确的扇区读写。

幸运的是，现代系统不会直接操作硬盘的柱面、磁头和扇区。硬盘驱动将每个柱面/磁头/扇区的三元组映射成唯一的块号（也叫物理块或设备块），更准确地说，映射到指定的扇区。现代操作系统可以直接使用块号（即逻辑块寻址（LBA））来访问硬盘，硬盘驱动程序把块号转换成正确的CHS地址。<a class="my_markdown" href="['#anchor47']"><sup class="my_markdown">[7]</sup></a>很自然地，块到CHS的映射是连续的：逻辑块n和逻辑块n + 1在物理上也是相邻的。稍后我们将看到，这种连续映射是很重要的。

文件系统是软件领域的概念。它们操作自己的操作单元，即逻辑块（有时候称作文件系统块，或者块）。逻辑块的大小必须是物理块大小的整数倍。换句话说，文件系统的逻辑块会映射到一个或多个硬盘物理块。


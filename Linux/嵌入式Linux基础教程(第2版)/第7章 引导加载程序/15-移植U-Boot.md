### 7.4　移植U-Boot

U-Boot之所以这么流行，其中一个原因就是它可以很容易地支持新的平台。将U-Boot移植到一个板卡上时，必须提供一个次级的makfile文件，在构建过程中由它来提供与具体板卡相关的定义。这些文件的名字都是config.mk。它们位于U-Boot顶层源码目录的.../board/vendor/boardname子目录中，其中boardname指定了具体的板卡名称。

在最新U-Boot版本中，.../boards子目录中包含了460多个名为config.mk的不同的板卡配置文件。这个U-Boot版本还支持49个不同的CPU配置（以相同的方式计算）。注意，在某些情况下，一个CPU配置会涵盖一系列芯片，比如ppc4xx就支持Power架构4xx家族的好几款处理器。U-Boot支持大量现今流行的CPU和CPU系列，以及更多的基于这些处理器的参考板。

如果你的板卡中包含的CPU是U-Boot所支持的一种，移植U-Boot就比较简单了。如果必须增加新的CPU，你就得准备多花费一些功夫了。幸亏在你之前已经有人完成了这些工作。无论你是要将U-Boot移植到一个新的CPU或是一个新的基于现有CPU的板卡上，最好是研究一下现有的源码，从中得到一些具体的指导。先确定哪种CPU和你的最为接近，然后复制与CPU相关的目录中的功能。最后，修改复制来的源码，在其中根据新CPU需求添加特定的支持。


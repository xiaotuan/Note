### 12.3.1　TFTP服务器

在Linux开发主机上配置TFTP并不困难。当然了，具体细节可能会有不同，这取决于你为开发工作站所选的Linux发行版。我们这里给出的指导意见是基于一些流行的桌面Linux发行版。

TFTP是一个TCP/IP服务，你的工作站上必须要开启这个服务。这就要求你的工作站能够响应它所收到的TFTP请求报文。最简单的方法是运行一个TFTP服务器后台程序。大多数主流桌面Linux发行版中都有很多软件包可以提供这个服务。我们这里的例子是基于HPA的TFTP服务器程序。它的源码可以从以下网址获得：ftp://ftp.kernel.org/pub/software/network/tftp。

在主流Ubuntu或其他基于Debian的系统上，可以使用以下命令安装HPA TFTP服务器程序<a class="my_markdown" href="['#anchor124']"><sup class="my_markdown">[4]</sup></a>：



![303.png](../images/303.png)
<a class="my_markdown" href="['#ac124']">[4]</a>　注意，不要将它与TFTP客户端程序（名为tftp-hpa）混淆。

配置这个TFTP服务器很容易。在Ubuntu和其他发行版中，我们只需要配置一个文件，名为/etc/default/tftpd-hpa。我们需要定制这个配置文件，以满足你的特定需求。代码清单12-4显示了一个典型的配置文件的例子。

代码清单12-4　TFTP配置



![304.png](../images/304.png)
你必须做的第一件事情是开启这个服务。当你第一次安装tftpd-hpa软件包时， `RUN_DAEMON` 的默认值为 `"no"` 。要开启这个服务，你必须将默认值 `"no"` 改成 `"yes"` ，正如代码清单12-4所示。

第二行定义了命令行选项，它会被传递给守护进程本身，通常是/usr/sbin/in.tftpd。 `-s` 选项告诉in.tftpd在启动时切换到一个指定的目录（/tftpboot）。这个目录就会成为TFTP服务器的根目录。 `-c` 标志表示允许创建新文件。如果目标板能够向服务器写入文件，这会有助于我们的开发和调试。BDI-3000（本书的后面会介绍它）就具备这个功能，如果没有 `-c` 标志，它就不能工作了。 `-l` 标志让TFTP守护进程在后台运行，并且在TFTP端口上侦听收到的TFTP报文。

修改完这个配置文件后，你必须重启TFTP服务器，以使修改生效：



![305.png](../images/305.png)
无论如何，参考一下Linux发行版自带的文档，这是了解如何在具体发行版中开启TFTP服务的好方法。


### 18.1.6　USB模式

对于非专业人员而言，USB更令人困惑的一个方面是它的各种操作模式。我们常常会听到USB OTG、小装置和外设这样的术语。通过前面的介绍，希望你已经能够区分USB的各种不同速率和连接器。这一节将接着介绍USB控制器和设备的各种模式。

标准桌面PC上的USB控制器和插座被称为USB主机。因为USB是一种主从式总线，根据定义，USB总线上必须有一个节点充当主控端。这就是主机，它还被称作主机模式或USB主机。主机控制器和根集线器是运行USB总线协议的底层硬件。USB主机总是充当总线上的主控端。

在简单的USB网络中，与主机相对的另一端是设备。有时它也被称作USB gadget（小装置）<a class="my_markdown" href="['#anchor183']"><sup class="my_markdown">[3]</sup></a>。Linux内核中的gadget功能仅仅是指某个设备能够工作于从（slave）模式。嵌入式设备一般不会工作于主机模式。例如，你也许会有一部运行Linux的智能手机，它带有USB接口和USB控制器，可以让手机工作于设备模式，或者说充当USB链路的从属端。

<a class="my_markdown" href="['#ac183']">[3]</a>　Linux的USB开发人员创造了gadget一词，以避免和过度使用的device一词混淆。

很多嵌入式系统需要同时工作于主模式（主机）和从模式（设备）。PDA（个人数字助理）就是个很好的例子。一方面，你的PDA可能需要连接到一个USB主机（比如桌面PC），以同步数据或更新软件。另一方面，你也许想连接一个USB键盘到PDA上，以方便输入。这些USB设备必须能够同时支持主机模式和设备模式。这被称作USB OTG。USB OTG的另一个好处是设备之间可以动态切换角色，而不需要重新插拔USB线。


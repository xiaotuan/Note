### 8.1　设备驱动程序的概念

虚拟内存操作系统中的设备驱动程序概念有些复杂，很多有经验的嵌入式开发人员在刚刚接触这些概念时都觉得它们不好理解。这是因为在很多流行的老式实时操作系统中并没有类似的架构。一些新的理念，比如虚拟内存、区分内核空间和用户空间都会增加这一概念的复杂性，而有经验的嵌入式开发人员也不熟悉这些内容。

设备驱动程序的一个最基本的作用就是将用户程序隔离起来，阻止它们随意访问关键的内核数据结构和硬件设备。此外，一个优秀的设备驱动程序还能够向用户隐藏硬件设备的复杂性和多样性。例如，一个向硬盘写入数据的程序不需要知道硬盘驱动器的扇区大小是512 B还是1024 B。用户只需要打开文件，并发出 `write` 命令就可以了。设备驱动程序会处理具体的细节，并将用户隔离开来，让他们不用关心复杂而又有风险的硬件设备编程。设备驱动程序为大量不同的硬件设备提供了一个一致的用户接口。我们所熟知的UNIX/Linux中的“一切都必须表示为一个文件”的惯例就是以此为基础的。


### 7.8 总结

并发和竞态广泛存在，中断屏蔽、原子操作、自旋锁和信号量都是解决并发问题的机制。中断屏蔽很少单独被使用，原子操作只能针对整数进行，因此自旋锁和信号量应用最为广泛。

自旋锁会导致死循环，锁定期间不允许阻塞，因此要求锁定的临界区小。信号量允许临界区阻塞，可以适用于临界区大的情况。

读写自旋锁和读写信号量分别是放宽了条件的自旋锁和信号量，它们允许多个执行单元对共享资源的并发读。



#### 本章导读

阻塞和非阻塞I/O是设备访问的两种不同模式，驱动程序可以灵活地支持用户空间对设备的这两种访问方式。

8.1节讲述了阻塞和非阻塞I/O的区别，并讲解了实现阻塞I/O的等待队列机制，以及在globalfifo设备驱动中增加对阻塞I/O支持的方法，并进行了用户空间的验证。

8.2节讲述了设备驱动的轮询（poll）操作的概念和编程方法，poll可以帮助用户了解是否能对设备进行无阻塞的访问。

8.3节讲解在globalfifo中增加poll操作的方法，并进行了用户空间的验证。


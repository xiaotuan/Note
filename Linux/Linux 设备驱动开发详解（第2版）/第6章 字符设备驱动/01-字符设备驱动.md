### 第6章 字符设备驱动

#### 本章导读

在整个Linux设备驱动的学习中，字符设备驱动较为基础。本章将讲解Linux字符设备驱动程序的结构，并解释其主要组成部分的编程方法。

6.1节讲解了Linux字符设备驱动的关键数据结构cdev及file_ operations结构体的操作方法，并分析了Linux字符设备的整体结构，给出了简单的设计模板。

6.2节描述了本章及后续各章节所基于的globalmem虚拟字符设备，第6～9章都将基于该虚拟设备实例进行字符设备驱动及并发控制等知识的讲解。

6.3节依据6.1节的知识讲解globalmem设备的驱动编写方法，对读写函数、seek()函数和I/O控制函数等进行了重点分析。该节的最后改造globalmem的驱动程序以利用文件私有数据。

6.4节给出了6.3节的globalmem设备驱动在用户空间的验证。




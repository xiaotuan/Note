### 第5章 Linux文件系统与设备统

#### 本章导读

由于字符设备和块设备都良好地体现了“一切都是文件”的设计思想，掌握Linux文件系统、设备文件系统的知识就显得相当重要了。

首先，驱动工程师编写的驱动最终通过操作系统的文件操作系统调用或C库函数（本质也基于系统调用）被访问，而设备驱动的结构最终也是为了迎合提供给应用程序员的API。

其次，驱动工程师在设备驱动中不可避免地会与设备文件系统打交道，从Linux 2.4内核的devfs文件系统到目前Linux 2.6基于sysfs的udev文件系统。

5.1节讲解了通过Linux API和C库函数在用户空间进行Linux文件操作的编程方法。

5.2节分析了Linux文件系统的目录结构，简单介绍了Linux内核中文件系统的实现，并给出了文件系统与设备驱动的关系。

5.3节和5.4节分别讲解Linux 2.4内核的devfs和Linux 2.6所采用的udev设备文件系统，并分析了两者的区别。

5.5节讲解了LDD6410的SD卡和NAND分区和文件系统的使用情况。




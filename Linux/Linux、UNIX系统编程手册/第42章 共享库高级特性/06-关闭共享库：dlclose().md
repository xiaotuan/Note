### 42.1.4　关闭共享库：dlclose()

dlclose()函数关闭一个库。



![1088.png](../images/1088.png)
dlclose()函数会减小handle所引用的库的打开引用的系统计数。如果这个引用计数变成了0并且其他库已经不需要用到该库中的符号了，那么就会卸载这个库。系统也会在这个库的依赖树中的库执行（递归地）同样的过程。当进程终止时会隐式地对所有库执行dlclose()。

> 从glibc 2.2.3开始，共享库中的函数可以使用atexit()（或on_exit()）来设置一个在库被卸载时自动调用的函数。


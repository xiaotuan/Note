[toc]

# 预备知识

在 Bash shell 环境中， 可以利用 `let`、 `(( ))` 和 `[]` 执行基本的算术操作。 而在进行高级操作时， `expr` 和 `bc` 这两个工具也会非常有用。

# 实战演练

1. 可以用普通的变量赋值方法定义数值， 这时， 它会被存储为字符串。 然而， 我们可以用一些方法使它能像数字一样进行运算。

```shell
#!/bin/bash
no1=4;
no2=5;
```

2. `let` 命令可以直接执行基本的算术操作。 当使用 `let` 时， 变量名之前不需要再添加 `$`， 例如：

```shell
let result=no1+no2
echo $result
```

+ 自加操作

```shell
$ let no1++
```

+ 自减操作

```shell
$ let no1--
```

+ 简写形式

```shell
$ let no1+=6
$ let no1-=6
```

+ 其他方法
操作符 `[]` 的使用方法和 `let` 命令类似：

```shell
$ result=$[ no1 + no2 ]
```

在 `[]` 中也可以使用 `$` 前缀， 例如:

```shell
$ result=$[ $no1 + 5 ]
```

也可以使用 `(())`， 但使用 `(())` 时， 变量名之前需要加上 `$`：

```shell
$ result=$(( no1 + 50 ))
```

`expr` 同样可以用于基本算术操作：

```shell
$ result=`expr 3 + 4`
$ result=$(expr $no1 + 5)
```

以上这些方法只能用于整数运算， 而不支持浮点数。

3. `bc` 是一个用于数学运算的高级工具， 这个精密计算器包含了大量的选项。 我们可以借助它执行浮点数运算并应用一些高级函数：

```shell
$ echo "4 * 0.56" | bc
2.24
$ no=54;
$ result=`echo "$no * 1.5" | bc`
$ echo $result
81.0
```

其他参数可以置于要执行的具体操作之前， 同时以分号作为定界符， 通过 stdin 传递给 bc。

+ 设定小数精度。 在下面的例子中， 参数 `scale=2` 将小数位个数设置为 2。 因此， `bc` 将会输出包含两个小数位的数值。

```shell
$ echo "scale=2;3/8" | bc
0.37
```

+ 进制转换。 用 bc 可以将一种进制系统转换为另一种。 来看看如何将十进制转换成二进制，然后再将二进制转换回十进制：

```shell
#!/bin/bash
用途： 数字转换
no=100
echo "obase=2;$no" | bc	
# 1100100
no=1100100
echo "obase=10;ibase=2;$no" | bc
# 100
```

+ 计算平方以及平方根。

```shell
$ echo "sqrt(100)" | bc #Square root
$ echo "10^10" | bc #Square
```
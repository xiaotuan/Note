[toc]

### 1. 赋值运算符 "="

```swift
// b 可以是变量、常量、指定类型字面量、表达式
var a:Int? = 5
var b:Int? = 6
b = a
b = nil
```

### 2. 复合运算符 "+="、"-="、"*="、"/="、"%="

```swift
var a = 10
var b = 5
a += b  // a = a + b a 等于 15
a -= b  // a = a - b a 等于 10
a *= b  // a = a * b a 等于 50
a /= b  // a = a / b a 等于 10
a %= b  // a = a % b a 等于 0
```

### 3. 单目负号和单目正号

```swift
var i = 2
var b = -i	// b = -2
b = -b	// 负负为正 b = 2
```

> 提示：单目正号 "+" 不做任何改变地返回操作数的值。

### 4. 算术运算符

```swift
var a = 5 + 6   // 11
var b = 10 - 6  // 4
var c = 2.0 * 6.5   // 13.0
b = b / 2   // 2
a = a % b   // 11 % 2 等于 11 % ((2 * 5) + 1) 等于 1
a = a / 0   // 和 C 语言一样，除数不能为 0，这里会弹出异常
```

求余运算符和求模运算符很容易被混淆，特别是当其中的两个操作数符号相同时，求余运算符和求模的结果可能会相同。不同的是当参与运算的两个数值操作数负号不一致时，求余运算结果的符号会和操作数 "a" 一致，例如：

```swift
var tmpInteger = -12 % 5
print(String(tmpInteger))
// 输出 -2
var tmpInteger1 = 13 % -6
print(String(tmpInteger1))
// 输出 1
```

Swift 可以对浮点数进行求余。浮点数求余运算使用的公式和整数的求余公式一样：

```swift
var num = 11.5.truncatingRemainder(dividingBy: 5)
```

可以使用下面代码获取 100 以内的随机数：

```swift
var tmpRandom = arc4random() % 100
print(tmpRandom)
```

### 5. 关系运算符

下表中列出了基本的关系运算符与其运算规则：

| 运算符 | 名称     | 功能                                       | 结果                                      |
| ------ | -------- | ------------------------------------------ | ----------------------------------------- |
| ==     | 等于     | a == b 判断是否 a 等于 b                   | a 等于 b 时为真，否则为假                 |
| !=     | 不等于   | a != b 判断是否 a 不等于 b                 | a 不等于 b 时为真，否则为假               |
| >      | 大于     | a > b 判断是否 a 大于 b                    | a 大于 b 时为真，否则为假                 |
| >=     | 大于等于 | a >= b 判断是否 a 大于等于 b               | a 大于等于 b 时为真，否则为假             |
| <      | 小于     | a < b 判断是否 a 小于 b                    | a  小于 b 时为真，否则为假                |
| <=     | 小于等于 | a <=b 判断是否 a 小于等于 b                | a 小于等于 b 时为真，否则为假             |
| ===    | 恒等     | a === b 判断两个对象是否引用同一个类实例   | a 和 b 引用同一个类实例为真，否者为假     |
| !==    | 不恒等   | a !== b 判断两个对象是否不引用同一个类实例 | a 和 b 没有引用同一个类实例为真，否者为假 |

### 6. 区间运算符

闭区间运算符 `a...b` 定义了一个包含从 a 到 b （包括 a 和 b）返回内所有值的区间。例如：

```swift
for iCount in 512...1024 {
    if (iCount % 2) == 0 {
        print("the cow is \(iCount)")
    }
}
```

半闭区间运算符 `a..<b` 定义一个包含从 a 到 b（不包括 b）范围内所有值的区间。例如：

```swift
var fruts = [ "apple", "orange", "belaner" ]
let icount = fruts.count
for i in 0..<icount {
    print("第\(i + 1)个水果是\(fruts[i])")
}
```

> 警告：区间运算符的两个操作数 "a" 一定不能大于 "b"，否则你的区间将不能成立。

### 7. 逻辑运算符

Swift 语言支持三个标准逻辑运算符：逻辑非运算符 "!"、逻辑与运算符 "&&"、逻辑或运算符 "||"。

逻辑非的标准格式是：

```swift
!<表达式>
```

例如：

```swift
let noAllow = true
var changeAllow = !noAllow
```

逻辑与的标准格式是：

```swift
<表达式>&&<表达式>
```

例如：

```swift

var a:Int = 1
var b:Int = 0
if (a != 0) && (b != 0) {   // 只有两个值都为 true 的时候才进行运算
    print("The Product is \(a * b)")
} else {
    print("Product by zero")
}
```

逻辑与的标准格式是：

```swift
<表达式>||<表达式>
```

**代码清单 2-4 SwiftInAction-002-004**

```swift
// 在一个校务管理系统中，只有管理权限为 8 （校长）或 9（系统管理员）才能进入管理后台
var authorityNo:Int = 8
// 只要其中一个值都为 true 就可以进入
if (authorityNo == 8) || (authorityNo == 9) {
    print("Welcome manager")
    // application main
} else {
    print("You have no authority")
    // out of application
}
```

> 注意：和逻辑与运算一样，逻辑或也支持 “短路计算”，当左边的表达式为 true 时，将不再计算右边的表达式。

### 8. 类型操作运算符

Swift 提供了两种强制类型转换运算符，一种是可以返回可选值的 `as?`，另一种是标准的强制转换符 `as`。跟可选类型的规则一样，当你不确定是否能转换成功时，可以使用 `as?` 版本的强制类型转换。

另一个是类型判断符 `is`，简单的说就是判断某个变量或者示例是否是某个类型。比如类型 b 继承自类型 a，我们先声明一个 b 类型的变量 c，然后执行 `c is b`，程序会先判断变量 c 是否是 b 类型，如果是则返回 true，如果不是则返回 false。

### 9. 位运算符

+ 按位取反运算符 `~` 是一个单目运算符，它的作用是对操作数的每一位都取反，也就是将每一位由 0 变成 1，1 变成 0。例如：

    ```swift
    var tmpBits:UInt8 = 0b11111111
    tmpBits = ~tmpBits  // 等于 0b00000000
    ```

+ 按位与运算符 "&" 是双目运算符，只有两个操作数的相同位都是真（1）的时候，表达式这一位的结果才为真（1）。例如：

    ```swift
    let oneBits:UInt8 = 0b11001100
    let twoBits:UInt8 = 0b00111111
    let reBits = oneBits & twoBits  // 等于 0b00001100
    ```

+ 按位或运算符 "|" 的运算规则类似于逻辑运算中的或运算，只要操作数的两个相同位有一个是真，那这一位运算的结构就是真。例如：

    ```swift
    let oneBits:UInt8 = 0b00110010
    let twoBits:UInt8 = 0b10011100
    let reBits = oneBits | twoBits // 等于 0b10111110
    ```

+ 按位异或运算符 "^"，它会比较两个操作数的相同位，如果相同则返回假，不同才返回真。例如：

    ```swift
    let oneBits:UInt8 = 0b10010100
    let twoBits:UInt8 = 0b00100111
    let reBits = oneBits ^ twoBits // 等于 0b10110011
    ```

+ 按位移动运算符，注意分为左移运算符 "<<" 和右移运算符 ">>"。简单的说就是将运算符操作数左移或右移指定的位数，被移出整型存储边界的低位将被直接抛弃，而右移留下的高位空白位用零 0 来填充。

    ```swift
    var oneBits:UInt8 = 1   // 即二进制的 00000001
    oneBits = oneBits << 1    // 00000010
    oneBits = oneBits << 2    // 00001000
    oneBits = oneBits >> 3    // 00000001
    oneBits = oneBits << 5    // 00100000
    oneBits = oneBits << 4    // 00000000
    ```

有符号整型的移位运算相对要复杂得多，其基本规则是：通过最高位（左边第一位称为数符号位）来表示这个整数还是负数，0 代表正数、1 代表负数、其余的位则存储真实值。例如：

```swift
var a:Int8 = 3
// 整数 +3 的二进制形式是：00000011
// 第一位为 0 代表正数，后面 7 位代表 a 中存储的数值绝对值
// 要表示负数也很简单只需要将第一位置为 1 即可
// -3: 10000011
```

对有符号整型按位右移时，高位不足时会使用符号位填充空白位。

### 10. 溢出运算符

示例：

```swift
var intMaxNum = Int32.max
// 在变量 intMaxNum 本身值的基础
intMaxNum += 1
```

当执行到第二行的时候会弹出异常。Swift 语言中的数值运算默认是不可以值溢出的。Swift 语言为整型计算提供了 5 个 "&" 符号开头的溢出运算符。分别为溢出加法 "&+"、溢出减法 "&-"、溢出乘法 "&*"。注意：除法溢出和求余溢出没有专门使用的运算符，我们在使用除法运算符 "/" 和求余运算符 "%" 出现溢出时，系统将自动进行截断。例如：

```swift
var intMaxNum = UInt8.max   // 无符号整型值的最大值等于 255
intMaxNum = intMaxNum &+ 1  // 值溢出被截断 intMaxNum = 0
```

有符号整型的溢出略有不同，其所有的加减法都是对包括符号位在内的二进制数形式进行二进制加减法，例如：

```swift
// 8 位有符号整型能表示的最大值为 127 最小为 -128
var intMaxNum = Int8.max
intMaxNum = intMaxNum &+ 1
```

同样的，我们使用二进制数表示这一截断过程：

```
01111111	// 代表有符号十进制数 127
+      1
= 10000000	// 代表有符号十进制数 -128
```




[toc]

### 1. MTK 平台

#### 1.1 MTK8766

##### 1.1.1 Android R

1. 修改 `ro.build.date` 和 `ro.build.date.utc` 属性的值

   修改 `build/make/tools/buildinfo.sh` 文件中的如下代码：

   ```diff
   @@ -17,8 +17,8 @@ echo "ro.build.version.release_or_codename=$PLATFORM_VERSION"
    echo "ro.build.version.security_patch=$PLATFORM_SECURITY_PATCH"
    echo "ro.build.version.base_os=$PLATFORM_BASE_OS"
    echo "ro.build.version.min_supported_target_sdk=$PLATFORM_MIN_SUPPORTED_TARGET_SDK_VERSION"
   -echo "ro.build.date=`$DATE`"
   -echo "ro.build.date.utc=`$DATE +%s`"
   +echo "ro.build.date=Mon Feb 14 16:19:06 CST 2022"
   +echo "ro.build.date.utc=1644826746"
    echo "ro.build.type=$TARGET_BUILD_TYPE"
    echo "ro.build.user=$BUILD_USERNAME"
    echo "ro.build.host=$BUILD_HOSTNAME"
   ```

2. 修改 `ro.vendor.build.date` 和 `ro.vendor.build.date.utc` 属性的值

   修改 `build/make/tools/buildinfo_common.sh` 文件中的如下代码：

   ```diff
   @@ -10,8 +10,8 @@ fi
    echo "# begin common build properties"
    echo "# autogenerated by $0"
    
   -echo "ro.${partition}.build.date=`$DATE`"
   -echo "ro.${partition}.build.date.utc=`$DATE +%s`"
   +echo "ro.${partition}.build.date=Mon Feb 14 16:19:06 CST 2022"
   +echo "ro.${partition}.build.date.utc=1644826746"
    echo "ro.${partition}.build.fingerprint=$BUILD_FINGERPRINT"
    echo "ro.${partition}.build.id=$BUILD_ID"
    echo "ro.${partition}.build.tags=$BUILD_VERSION_TAGS"
   ```

3. 修改 `ro.bootimage.build.date` 和 `ro.bootimage.build.date.utc` 属性的值

   修改 `build/make/core/Makefile` 文件中的如下代码：

   ```diff
   @@ -573,8 +573,8 @@ endif
           $(hide) echo "#" >> $@; \
                   echo "# BOOTIMAGE_BUILD_PROPERTIES" >> $@; \
                   echo "#" >> $@;
   -       $(hide) echo ro.bootimage.build.date=`$(DATE_FROM_FILE)`>>$@
   -       $(hide) echo ro.bootimage.build.date.utc=`$(DATE_FROM_FILE) +%s`>>$@
   +       $(hide) echo ro.bootimage.build.date="Mon Feb 14 16:19:06 CST 2022">>$@
   +       $(hide) echo ro.bootimage.build.date.utc="1644826746">>$@
           $(hide) echo ro.bootimage.build.fingerprint="$(BUILD_FINGERPRINT_FROM_FILE)">>$@
           $(hide) echo "#" >> $@; \
                   echo "# ADDITIONAL VENDOR BUILD PROPERTIES" >> $@; \
   ```

4. 修改 `/proc/version` 中 kernel 编译时间的值

   修改 `kernel-4.14/fs/proc/version.c` 文件中 `version_proc_show()` 函数的如下代码：

   ```diff
   @@ -12,6 +12,7 @@ static int version_proc_show(struct seq_file *m, void *v)
                   utsname()->sysname,
                   utsname()->release,
                   utsname()->version);
   +       seq_printf(m, "%s", "Linux version 4.14.186 (nobody@android-build) (Android (6443078 based on r383902) clang version 11.0.1 (https://android.googlesource.com/toolchain/llvm-project b397f81060ce6d701042b782172ed13bee898b79), LLD 11.0.1 (/buildbot/tmp/tmp6_m7QH b397f81060ce6d701042b782172ed13bee898b79)) #1 SMP PREEMPT Mon Feb 14 14:29:45 CST 2022");
           return 0;
    }
   ```

5. 修改 `frameworks/base/packages/SettingsLib/src/com/android/settingslib/DeviceInfoUtils.java` 文件中的如下代码：

   ```diff
   @@ -78,24 +78,25 @@ public class DeviceInfoUtils {
            // Example:
            // 4.9.29-g958411d
            // #1 SMP PREEMPT Wed Jun 7 00:06:03 CST 2017
   -        final String VERSION_REGEX =
   -                "(#\\d+) " +              /* group 1: "#1" */
   -                "(?:.*?)?" +              /* ignore: optional SMP, PREEMPT, and any CONFIG_FLAGS */
   -                "((Sun|Mon|Tue|Wed|Thu|Fri|Sat).+)"; /* group 2: "Thu Jun 28 11:02:39 PDT 2012" */
   -        Matcher m = Pattern.compile(VERSION_REGEX).matcher(uname.version);
   -        if (!m.matches()) {
   -            Log.e(TAG, "Regex did not match on uname version " + uname.version);
   -            return context.getString(R.string.status_unavailable);
   -        }
   +        // final String VERSION_REGEX =
   +        //         "(#\\d+) " +              /* group 1: "#1" */
   +        //         "(?:.*?)?" +              /* ignore: optional SMP, PREEMPT, and any CONFIG_FLAGS */
   +        //         "((Sun|Mon|Tue|Wed|Thu|Fri|Sat).+)"; /* group 2: "Thu Jun 28 11:02:39 PDT 2012" */
   +        // Matcher m = Pattern.compile(VERSION_REGEX).matcher(uname.version);
   +        // if (!m.matches()) {
   +        //     Log.e(TAG, "Regex did not match on uname version " + uname.version);
   +        //     return context.getString(R.string.status_unavailable);
   +        // }
   +        //Linux version 4.14.186 (nobody@android-build) (Android (6443078 based on r383902ee898b79)) #1 SMP PREEMPT Wed Apr 13 16:08:01 CST 2022
    
            // Example output:
            // 4.9.29-g958411d
            // #1 Wed Jun 7 00:06:03 CST 2017
   -        return new StringBuilder().append(uname.release)
   +        return new StringBuilder().append("4.14.186")
                    .append("\n")
   -                .append(m.group(1))
   +                .append("#1")
                    .append(" ")
   -                .append(m.group(2)).toString();
   +                .append("Wed Apr 13 16:08:01 CST 2022").toString();
        }
    
        /**
   ```

   
[toc]

预处理器也可以用来定义常量。只需在程序顶部添加下面一行：

```c
#define TAXRATE 0.015
```

通常，这样定义的常量也称为明示常量。

请注意格式，首先是 #define，接着是符号常量名（TAXRATE），然后是符号常量的值（0.015）（注意，其中并没有 = 符号）。所以，其通用格式如下：

```c
#define NAME value
```

> 注意，末尾不用加分号，因为这是一种由预处理器处理的替换机制。

用大写表示符号常量是 C 语言一贯的传统。这样，在程序中看到全大写的名称就立刻明白这是一个符号常量，而非变量。

另外，还有一个不常用的命名约定，即在名称前带 c_ 或 k_前缀来表示常量（如，c_level 或 k_line）。

符号常量的命名规则与变量相同。可以使用大小写字母、数字和下划线字符，首字符不能为数字。

程序清单**4.4 pizza.c**程序

```c
/* pizza.c -- 在比萨饼程序中使用已定义的常量 */
#include <stdio.h>

#define PI 3.14159

int main(void)
{
	float area, circum, radius;
	printf("What is the radius of your pizza?\n");
	scanf("%f", &radius);
	area = PI * radius * radius;
	circum = 2.0 * PI * radius;
	printf("Your basic pizza parameters are as follows:\n");
	printf("circumference = %1.2f, area = %1.2f\n", circum, area);
	return 0;
}
```

运行程序输出如下：

```c
What is the radius of your pizza?
6.0
Your basic pizza parameters are as follows:
circumference = 37.70, area = 113.10
```

#define 指令还可以定义字符和字符串常量。前者使用单引号，后者使用双引号。如下所示：

```c
#define BEEP '\a'
#define TEE 'T'
#define ESC '\033'
```

记住，符号常量名后面的内容被用来替换符号常量。不要犯这样的常见错误：

```c
/* 错误的格式 */
#define TOES = 20
```

如果这样做，替换 TOES 的是 = 20，而不是 20。这种情况下，下面的语句：

```c
digits = fingers + TOES;
```

将被转换成错误的语句：

```c
digits = fingers + = 20;
```

#### 3.1 const 限定符

C90 标准新增了 const 关键字，用于限定一个变量为只读。其声明如下：

```c
const int MONTHS = 12;	// MONTHS 在程序中不可更改，值为 12
```

#### 3.2 明示常量

C 头文件 limits.h 和 float.h 分别提供了与整数类型和浮点类型大小限制相关的详细信息。每个头文件都定义了一系列供实现使用的明示常量。

<center>表4.1 limits.h 中的一些明示常量</center>

| 明示常量   | 含义                            |
| ---------- | ------------------------------- |
| CHAR_BIT   | char 类型的位数                 |
| CHAR_MAX   | char 类型的最大值               |
| CHAR_MIN   | char 类型的最小值               |
| SCHAR_MAX  | signed char 类型的最大值        |
| SCHAR_MIN  | signed char 类型的最小值        |
| UCHAR_MAX  | unsigned char 类型的最大值      |
| SHRT_MAX   | short 类型的最大值              |
| SHRT_MIN   | short 类型的最小值              |
| USHRT_MAX  | unsigned short 类型的最大值     |
| INT_MAX    | int 类型的最大值                |
| INT_MIN    | int 类型的最小值                |
| UINT_MAX   | unsigned int 的最大值           |
| LONG_MAX   | long 类型的最大值               |
| LONG_MIN   | long 类型的最小值               |
| ULONG_MAX  | unsigned long 类型的最大值      |
| LLONG_MAX  | long long 类型的最大值          |
| LLONG_MIN  | long long 类型的最小值          |
| ULLONG_MAX | unsigned long long 类型的最大值 |

<center>表4.2 float.h中的一些明示常量</center>

| 明示常量       | 含义                                                  |
| -------------- | ----------------------------------------------------- |
| FLT_MANT_DIT   | float 类型的尾数位数                                  |
| FLT_DIG        | float 类型的最少有效数字位数（十进制）                |
| FLT_MIN_10_EXP | 带全部有效数字的 float 类型的最小负指数（以 10 为底） |
| FLT_MAX_10_EXP | float 类型的最大正指数                                |
| FLT_MIN        | 保留全部精度的 float 类型最小正数                     |
| FLT_MAX        | float 类型的最大正数                                  |
| FLT_EPSILON    | 1.00 和比 1.00 大的最小 float 类型值之间的差值        |

程序清单**4.5 defines.c**程序

```c
// defines.c -- 使用 limit.h 和 float 头文件中定义的明示常量
#include <stdio.h>
#include <limits.h>	// 整型限制
#include <float.h>	// 浮点型限制

int main(void)
{
	printf("Some number limits for this system:\n");
	printf("Biggest int: %d\n", INT_MAX);
	printf("Smallest long long: %lld\n", LLONG_MIN);
	printf("One byte = %d bits on this system.\n", CHAR_BIT);
	printf("Largest double: %e\n", DBL_MAX);
	printf("Smallest normal float: %e\n", FLT_MIN);
	printf("float precision = %d digits\n", FLT_DIG);
	printf("float epsilon = %e\n", FLT_EPSILON);
	return 0;
}
```

运行后输出如下所示：

```console
Some number limits for this system:
Biggest int: 2147483647
Smallest long long: -9223372036854775808
One byte = 8 bits on this system.
Largest double: 1.797693e+308
Smallest normal float: 1.175494e-38
float precision = 6 digits
float epsilon = 1.192093e-07
```


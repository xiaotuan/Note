[toc]

### 1. printf() 函数

请求 printf() 函数打印数据的指令要与待打印数据的类型相匹配。

<center>4.3 转换说明及其打印的输出结果</center>

| 转换说明 | 输出                                                         |
| -------- | ------------------------------------------------------------ |
| %a       | 浮点数、十六进制数和 p 记数法（C99/C11）                     |
| %A       | 浮点数、十六进制数和 p 记数法（C99/C11）                     |
| %c       | 单个字符                                                     |
| %d       | 有符号十进制整数                                             |
| %e       | 浮点数，e 记数法                                             |
| %E       | 浮点数，e 记数法                                             |
| %f       | 浮点数，十进制记数法                                         |
| %g       | 根据值的不同，自动选择 %f 或 %e。%e 格式用于指数小于 -4 或者大于或等于精度时 |
| %G       | 根据值的不同，自动选择 %f 或 %E。%E 格式用于指数小于 -4 或者大于或等于精度时 |
| %i       | 有符号十进制整数（与 %d 相同）                               |
| %o       | 无符号八进制整数                                             |
| %p       | 指针                                                         |
| %s       | 字符串                                                       |
| %u       | 无符号十进制整数                                             |
| %x       | 无符号十六进制整数，使用十六进制数 0f                        |
| %X       | 无符号十六进制整数，使用十六进制数 0F                        |
| %%       | 打印一个百分号                                               |

### 2. 使用 printf()

程序清单**4.6 printout.c**程序

```c
/* printout.c -- 使用转换说明 */
#include <stdio.h>

#define PI 3.141593

int main(void)
{
	int number = 7;
	float pies = 12.75;
	int cost = 7800;
	printf("The %d contestants ate %f berry pies.\n", number, pies);
	printf("The value of pi is %f.\n", PI);
	printf("Farewell! thou art too dear for my possessing,\n");
	printf("%c%d\n", '$', 2 * cost);
	return 0;
}
```

运行后输出如下：

```console
The 7 contestants ate 12.750000 berry pies.
The value of pi is 3.141593.
Farewell! thou art too dear for my possessing,
$15600
```

这是 printf() 函数的格式：

printf(格式字符串, 待打印项1, 待打印项2, ...);

> 警告：格式字符串中的转换说明一定要与后面的每个项相匹配。

### 3. printf() 的转换说明修饰符

在 % 和转换字符之间插入修饰符可修饰基本的转换说明。

<center>表4.4 printf() 的修饰符</center>

| 修饰符 | 含义                                                         |
| ------ | ------------------------------------------------------------ |
| 标记   | 表 4.5 描述了 5 种标记（-、+、空格、# 和 0），可以不使用标记或使用多个标记<br />示例："%-10d" |
| 数字   | 最小字段宽度<br />如果该字段不能容纳待打印的数字或字符串，系统会使用更宽的字段<br />示例："%4d" |
| .数字  | 精度<br />对于 %e、%E 和 %f 转换，表示小数点右边数字的位数<br />对于 %g 和 %G 转换，表示有效数字最大位数<br />对于 %s 转换，表示待打印字符的最大数量<br />对于整型转换，表示待打印数字的最小位数<br />如有必要，使用前导 0 来达到这个位数<br />只使用.表示气候跟随一个 0，所以 %.f 和 %.0f 相同<br />示例："%5.2f" 打印一个浮点数，字段宽度为 5 字符，其中小数点后有两位数字 |
| h      | 和整型转换说明一起使用，表示 short int 或 unsigned short int 类型的值<br />示例："%hu"、"%hx"、"%6.4hd" |
| hh     | 和整型转换说明一起使用，表示 signed char 或 unsigned char 类型的值<br />示例："%hhu"、"%hhx"、"%6.4hhd" |
| j      | 和整型转换说明一起使用，表示 intmax_t 或 uintmax_t 类型的值。这些类型定义在<br />stdint.h 中。示例："%jd"、"%8jx" |
| l      | 和整型转换说明一起使用，表示 long int 或 unsigned long int 类型的值<br />示例："%ld"、"%8lu" |
| ll     | 和整型转换说明一起使用，表示 long long int 或 unsigned long long int 类型的值（C99）<br />示例："%lld"、"%8llu" |
| L      | 和浮点转换说明一起使用，表示 long double 类型的值<br />示例："%Lf"、"%10.4Le" |
| t      | 和整型转换说明一起使用，表示  ptrdiff_t 类型的值。ptrdiff_t 是两个指针差值的类型（C99)<br />示例："%td"、"%12td" |
| z      | 和整型转换说明一起使用，表示 size_t 类型的值。size_t 是 sizeof 返回的类型（C99）<br />示例："%zd"、"%12zd" |

<center>表4.5 printf() 中的标记</center>

| 标记 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -    | 待打印项左对齐，即，从字段的左侧开始打印该项<br />示例："%-20s" |
| +    | 有符号值若为正，则在值前面显示加号；若为负，则在值前面显示减号<br />示例："%+6.2f" |
| 空格 | 有符号值若为正，则在值前面显示前导空格（不显示任何符号）；若为负，则在值前面显示减号<br />+ 标记覆盖一个空格<br />示例："% 6.2f" |
| #    | 把结果转换为另一种形式。如果是 %o 格式，则以 0 开始；如果是 %x 或者 %X 格式，则以 0x 或 0X 开始；对于所有的浮点格式，# 保证了即使后面没有任何数字，也打印一个小数点字符。对于 %g 和 %G 格式， # 防止结果后面的 0 被删除。<br />示例："%#o"、"%#8.0f"、"%+#10.3e" |
| 0    | 对于数值格式，用前导 0 代替空格填充字段宽度。对于整数格式，如果出现 - 标记或指定精度，则忽略该标记。 |


### 8.1　单字符I/O： `getchar()` 和 `putchar()` 

第7章中提到过， `getchar()` 和 `putchar()` 每次只处理一个字符。你可能认为这种方法实在太笨拙了，毕竟与我们的阅读方式相差甚远。但是，这种方法很适合计算机。而且，这是绝大多数文本（即，普通文字）处理程序所用的核心方法。为了帮助读者回忆这些函数的工作方式，请看程序清单8.1。该程序获取从键盘输入的字符，并把这些字符发送到屏幕上。程序使用while循环，当读到#字符时停止。

程序清单8.1　 `echo.c` 程序

```c
/* echo.c -- 重复输入 */
#include <stdio.h>
int main(void)
{
     char ch;
     while ((ch = getchar()) != '#')
          putchar(ch);
     return 0;
}
```

自从ANSI C标准发布以后，C就把 `stdio.h` 头文件与使用 `getchar()` 和 `putchar()` 相关联，这就是为什么程序中要包含这个头文件的原因（其实， `getchar()` 和 `putchar()` 都不是真正的函数，它们被定义为供预处理器使用的宏，我们在第16章中再详细讨论）。运行该程序后，与用户的交互如下：

```c
Hello, there. I would[enter]
Hello, there. I would
like a #3 bag of potatoes.[enter]
like a

```

读者可能好奇，为何输入的字符能直接显示在屏幕上？如果用一个特殊字符（如，#）来结束输入，就无法在文本中使用这个字符，是否有更好的方法结束输入？要回答这些问题，首先要了解C程序如何处理键盘输入，尤其是缓冲和标准输入文件的概念。


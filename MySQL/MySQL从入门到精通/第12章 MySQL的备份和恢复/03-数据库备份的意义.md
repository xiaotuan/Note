#### 
  12.1.1 数据库备份的意义


数据丢失对大小企业来说都是个恶梦，业务数据与企业日常业务运作唇齿相依，损失这些数据，即使是暂时性，亦会威胁到企业辛苦赚来的竞争优势，更可能摧毁公司的声誉，或可能引致昂贵的诉讼和索偿费用。

在震惊世界的美国“9·11”恐怖事件发生后，许多人将目光投向金融界巨头摩根士丹利公司。这家金融机构在世贸大厦租有25层，惨剧发生时有2000多名员工正在楼内办公，公司受到重创。可是正当大家扼腕痛惜时，该公司宣布，全球营业部第二天可以照常工作。其主要原因是它在新泽西州建立了灾备中心，并保留着数据备份，从而保障公司全球业务的不间断运行。备份的重要性可见一斑。

随着服务器海量数据的不断增长，数据的体积变得越来越庞大。同时，各种数据的安全性和重要程度也越来越被人们所重视。对数据备份的认同涉及到两个主要问题，一是为什么要备份，二是为什么要选择磁带作为备份的介质。首先我们来认识备份的重要性。

大到自然灾害，小到病毒、电源故障乃至操作员意外操作失误，都会影响系统的正常运行，甚至造成整个系统完全瘫痪。数据备份的任务与意义就在于，当灾难发生后，通过备份的数据完整、快速、简捷、可靠地恢复原有系统。针对现有的对备份的误解，必须了解和认识一些典型的事例，从而认清备份方案的一些误区。

首先，有人认为复制就是备份，其实单纯复制数据无法使数据留下历史记录，也无法留下系统的NDS或者Registry等信息。完整的备份包括自动化的数据管理与系统的全面恢复，因此，从这个意义上说，备份=拷贝+管理。

其次，以硬件备份代替备份。虽然很多服务器都采取了容错设计，即硬盘备份（双机热备份、磁盘阵列与磁盘镜像等），但这些都不是理想的备份方案。比如双机热备份中，如果两台服务器同时出现故障，那么整个系统便陷入瘫痪状态，因此存在的风险还是相当大的。

此外，只把数据文件作为备份的目标。有人认为备份只是对数据文件的备份，系统文件与应用程序无需进行备份，因为它们可以通过安装盘重新进行安装。事实上，考虑到安装和调试整个系统的时间可能要持续好几天，其中花费的投入是十分不必要的，因此，最有效的备份方式是对整个IT架构进行备份。

很难想象，几个GB的工程数据价值超过几千万人民币，而同样容量的商业数据有可能以亿元来衡量，就不用谈及整个系统的价值了。这还不完全是数据进行备份的全部原因，一旦系统崩溃，除了显而易见的金钱损失，隐含的各种损失有时候是更加触目惊心的。

所以，只有拥有了安全可靠的备份后，身为系统管理员（SA）的我们才可舒心地享受生活。反之，如果没有一个可靠的备份策略，那么各位同事一定时时在为数据的丢失而烦恼。

有研究机构表明，企业每损失10 MB的数据，就会造成5000美元的损失。如果丢失的关键数据没有及时恢复的话，损失还会加重。数据库备份的意义如下。

⑴提高信息管理系统的风险修复能力，在数据库崩溃的时候能及时找到备份数据。

⑵在Web 2.0时代，没有用户数据的应用没有任何意义，数据库的备份是一种防患于未然的强力且最有效手段。

⑶使用数据库的备份和还原是数据应急方案中代价花费最小的，是企业数据保护的最优选择。

定制一套合理的备份策略尤为重要，可以让数据库管理员全局掌控数据库的备份恢复。以下是一些数据库管理员可以思考的因素。

⑴数据库要定期做备份，备份的周期应当根据应用数据系统可承受的恢复时间，而且定期备份的时间应当在系统负载最低的时候进行。对于重要的数据，要保证在极端情况下的损失都可以正常恢复。

⑵定期备份后，同样需要定期做恢复测试，了解备份的正确可靠性，确保备份是有意义的、可恢复的。

⑶根据系统需要来确定是否采用增量备份，增量备份只需要备份每天的增量数据，备份花费的时间少，对系统负载的压力也小。缺点就是恢复的时候需要加载之前所有的备份数据，恢复时间较长。

⑷确保MySQL打开了log-bin选项，MySQL在做完整恢复或者基于时间点恢复的时候都需要BINLOG。

⑸可以考虑异地备份。


### 
  20.3 技术要点


<img class="my_markdown" class="h-pic" src="../images/Figure-0445-362.jpg" style="width:87px;  height: 86px; "/> 本节视频教学录像：2分钟

本章中采用的是Google Map作为第三方API使用，读者也可以使用百度地图API来重新设计开发。百度地图对国内定位服务将有更好的支持,并且支持文档也相当完善，百度地图LBS开放平台官方网址为：http://developer.baidu.com/map/。另外本系统的数据记录是作为单机数据进行存储，SQLite的使用需要读者单独掌握。

Java连接MySQL数据库，代码如下。

&#13;
    package src;&#13;
    import java.io.IOException&#13;
    import java.io.UnsupportedEncodingException&#13;
    import java.sql.*&#13;
    import java.util.*;&#13;
    public class MysqlConnectSystem {&#13;
  /**&#13;
     *@param args&#13;
    * @throws IOException&#13;
    */&#13;
    public static void main(String[] args) throws SQLException, IOException {&#13;
    String Usename,KeyID,UrlString&#13;
    //String DriverConnect&#13;
    char MenuExitValue&#13;
    String driver=”com.mysql.jdbc.Driver”&#13;
    Scanner EntryValue=new Scanner(System.in)&#13;
    System.out.println(“欢迎使用MysqlConnectSystem信息管理系统！")&#13;
    MysqlConnectSystem mysqlconnect=new MysqlConnectSystem()&#13;
    MysqlConnectSystem mysqlinsert=new MysqlConnectSystem()&#13;
    MysqlConnectSystem mysqlupdate=new MysqlConnectSystem()&#13;
    MysqlConnectSystem mysqldelete=new MysqlConnectSystem()&#13;
    System.out.println("请输入要登录的用户名：")&#13;
    Usename=EntryValue.next()&#13;
    System.out.println("请输入要登录的数据库的密码：")&#13;
    KeyID=EntryValue.next()&#13;
    System.out.println("请输入需要登录的数据库：")&#13;
    UrlString="jdbc:mysql://127.0.0.1:3306/"+EntryValue.next()&#13;
    do{&#13;
    try {&#13;
    Class.forName(driver)&#13;
    Connection conn=DriverManager.getConnection(UrlString, Usename, KeyID)&#13;
     if(!conn.isClosed())&#13;
     {&#13;
     int MenuSelectValue&#13;
     System.out.println("Succeeded connectint to the database company!!")&#13;
          System.out.println("请选择需要的操作：1、查询数据 2、插入数据 3、更新数据 4、删除数据 ")&#13;
          MenuSelectValue=EntryValue.nextInt()&#13;
        switch(MenuSelectValue){&#13;
        case 1:&#13;
        mysqlconnect.Mysql_ConnectExecute_Select(Usename,KeyID,UrlString)&#13;
        break&#13;
        case 2:&#13;
        mysqlinsert.Mysql_ConnectExecute_Insert(Usename,KeyID,UrlString)&#13;
        break&#13;
        case 3:&#13;
        mysqlupdate.Mysql_ConnextExecute_Update(Usename,KeyID,UrlString)&#13;
    break&#13;
     case 4:&#13;
    mysqldelete.Mysql_ConnectExecute_Delete(Usename,KeyID,UrlString)&#13;
    break;&#13;
    default:&#13;
     }&#13;
    conn.close()&#13;
  //Statement statement=conn.createStatement()&#13;
     }&#13;
    }catch(ClassNotFoundException e){&#13;
  // TODO 自动生成 catch 块&#13;
  //e.printStackTrace()&#13;
    System.out.println("找不到JDBC驱动模块！")&#13;
    }catch(InputMismatchException e){&#13;
    System.out.println("输入非法的字符！")&#13;
    }&#13;
    System.out.println("是否退出系统？返回主菜单（m）退出（e)")&#13;
    MenuExitValue=(char)System.in.read();&#13;
    }while(MenuExitValue!='e');&#13;
    System.out.println("程序已结束！")&#13;
  }&#13;
  /*&#13;
    the Program is to Select the database!!!&#13;
    */&#13;
    public void Mysql_ConnectExecute_Select(String UseNameValue,String KeyIDValue,String UrlinforValue)&#13;
  {&#13;
    String SelectDriver="com.mysql.jdbc.Driver"&#13;
    String Select_By_Usename,Select_By_KeyID,Select_By_Urlinfor&#13;
    int SelectStyleValue&#13;
    Scanner EntryValue=new Scanner(System.in)&#13;
    try{&#13;
    Class.forName(SelectDriver)&#13;
     Connection conn=DriverManager.getConnection(UrlinforValue,UseNameValue,KeyIDValue)&#13;
     if(!conn.isClosed())&#13;
     {&#13;
    Statement statement=conn.createStatement()&#13;
    System.out.println("请选择查询的方式：1、按姓名查询 2、按密码查询 3、按网址查询 4、全部显示&#13;
    ")&#13;
        SelectStyleValue=EntryValue.nextInt()&#13;
        switch (SelectStyleValue){&#13;
        case 1:&#13;
        System.out.println("请输入要查找的用户名：")&#13;
        Select_By_Usename=EntryValue.next()&#13;
        String SelectExecuteState="select * from urlinformation where usename='"+Select_By_Usename+"'"&#13;
        ResultSet rs=statement.executeQuery(SelectExecuteState)&#13;
        System.out.println("---------------------------------------------------------------------")&#13;
          System.out.println("the result is:")&#13;
          System.out.println("---------------------------------------------------------------------")&#13;
            System.out.println("Name"+"       "+"keyid"+"       "+"urlinfor")&#13;
          System.out.println("---------------------------------------------------------------------")&#13;
          String ReUseNameValue=null&#13;
          while(rs.next()) {&#13;
            ReUseNameValue=rs.getString("usename")&#13;
          ReUseNameValue=new String(ReUseNameValue.getBytes("ISO-8859-1"),"GB2312")&#13;
              System.out.println(ReUseNameValue+"              "+rs.getString("Keyid")+"         "+rs.getString("urlinfor"))&#13;
            }&#13;
          rs.close()&#13;
          break&#13;
        case 2:&#13;
        System.out.println("请输入要查找的密码：")&#13;
        Select_By_KeyID=EntryValue.next()&#13;
        String SelectExecuteStateValue="select * from urlinformation where keyid='"+Select_By_KeyID+"'"&#13;
        ResultSet rsk=statement.executeQuery(SelectExecuteStateValue)&#13;
        System.out.println("---------------------------------------------------------------------")&#13;
            System.out.println("the result is:")&#13;
            System.out.println("---------------------------------------------------------------------")&#13;
            System.out.println("Name"+"       "+"keyid"+"      "+"urlinfor")&#13;
            System.out.println("---------------------------------------------------------------------")&#13;
            String ReKeyIDValue=null&#13;
            while(rsk.next()){&#13;
            ReKeyIDValue=rsk.getString("keyid")&#13;
          ReKeyIDValue=new String(ReKeyIDValue.getBytes("ISO-8859-1"),"GB2312")&#13;
            System.out.println(rsk.getString("usename")+"          "+ReKeyIDValue+"          "+ rsk.getString("urlinfor"))&#13;
    }&#13;
    rsk.close()&#13;
    break&#13;
    case 3:&#13;
    System.out.println("请输入要查找的网址：")&#13;
    Select_By_Urlinfor=EntryValue.next()&#13;
    String SelectExecuteStateValueUrl="select * from urlinformation where urlinfor='"+Select_By_Urlinfor+"'"&#13;
    ResultSet rsu=statement.executeQuery(SelectExecuteStateValueUrl)&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
    System.out.println("the result is:")&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
         System.out.println("Name"+"       "+"keyid"+"      "+"urlinfor")&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
    String ReUrlinforValue=null&#13;
        while(rsu.next()){&#13;
    ReUrlinforValue=rsu.getString("urlinfor")&#13;
     try {&#13;
    ReUrlinforValue=new String(ReUrlinforValue.getBytes("ISO-8859-1"),"GB2312")&#13;
     }catch(UnsupportedEncodingException e){&#13;
     //TODO自动生成catch块&#13;
     e.printStackTrace()&#13;
     }&#13;
        System.out.println(rsu.getString("usename")+"           "+rsu.getString("keyid")+""+ReUrlinforValue)&#13;
    }&#13;
    rsu.close()&#13;
    break&#13;
    case 4:&#13;
    String SelectAllRecord="select*from urlinformation"&#13;
    ResultSet rsa=statement.executeQuery(SelectAllRecord)&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
    System.out.println("the result is:")&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
         System.out.println("Name"+"       "+"keyid"+"      "+"urlinfor")&#13;
    System.out.println("---------------------------------------------------------------------")&#13;
    String ReAllRecordValue=null&#13;
        while(rsa.next())&#13;
    {&#13;
    ReAllRecordValue=rsa.getString("usename")&#13;
    ReAllRecordValue=new String(ReAllRecordValue.getBytes("ISO-8859-1"),"GB2312")&#13;
          System.out.println(rsa.getString("usename")+"         "+rsa.getString("keyid")+"         "+rsa.getString("urlinfor"))&#13;
          }&#13;
          break&#13;
        default:&#13;
        System.out.println("你输入非法的字符！");&#13;
        }&#13;
    }&#13;
    conn.close()&#13;
    } catch(UnsupportedEncodingException e){&#13;
    //TODO自动生成catch块&#13;
    e.printStackTrace()&#13;
    }catch(ClassNotFoundException e){&#13;
    e.printStackTrace()&#13;
    }catch(SQLException e){&#13;
    //TODO自动生成catch块&#13;
    e.printStackTrace()&#13;
    }&#13;
    }&#13;
    /*&#13;
    the Program is to Select the database!!!&#13;
    */&#13;
    public void Mysql_ConnectExecute_Insert(String UseNameValue,String KeyIDValue,String UrlinforValue)&#13;
    {&#13;
    String InsertDriver="com.mysql.jdbc.Driver"&#13;
    String InsertUseNameValue,InsertKeyIDValue,InsertUrlinforValue&#13;
    String InsertDatabaseExecute&#13;
    Scanner EntryValue=new Scanner(System.in)&#13;
    try{&#13;
    Class.forName(InsertDriver)&#13;
    Connection conn=DriverManager.getConnection(UrlinforValue,UseNameValue,KeyIDValue)&#13;
    if(!conn.isClosed())&#13;
    {&#13;
    Statement statement=conn.createStatement()&#13;
    System.out.println("请输入要插入数据库的用户名：")&#13;
    InsertUseNameValue=EntryValue.next()&#13;
    System.out.println("请输入密码：")&#13;
    InsertKeyIDValue=EntryValue.next()&#13;
    System.out.println("请输入登录的网址：")&#13;
    InsertUrlinforValue=EntryValue.next()&#13;
     InsertDatabaseExecute="insert into urlinformation value('"+InsertUseNameValue+"','"+InsertKeyIDVal ue+"','"+InsertUrlinforValue+"')"&#13;
    System.out.println(InsertDatabaseExecute)&#13;
    statement.executeUpdate(InsertDatabaseExecute)&#13;
    System.out.println("已成功将数据插入数据库中!")&#13;
    conn.close()&#13;
     }&#13;
     }catch(ClassNotFoundException e){&#13;
   // TODO 自动生成 catch 块&#13;
    e.printStackTrace()&#13;
     }catch(SQLException e){&#13;
   // TODO 自动生成 catch 块&#13;
    e.printStackTrace()&#13;
   //System.out.println("SQL语句异常！！！")&#13;
     }&#13;
  }&#13;
  /*&#13;
     the Program is to update the database!!!&#13;
     */&#13;
    public void Mysql_ConnextExecute_Update(String UseNameValue,String KeyIDValue,String UrlinforValue)&#13;
  {&#13;
     String UpdateDriver="com.mysql.jdbc.Driver"&#13;
     String UpdateUsenameValue,UpdateKeyIDValue,UpdateUrlinforValue&#13;
     String UpdateOrderString&#13;
     Scanner EntryValue=new Scanner(System.in)&#13;
     try{&#13;
    Class.forName(UpdateDriver)&#13;
    Connection conn=DriverManager.getConnection(UrlinforValue, UseNameValue, KeyIDValue);&#13;
   if(!conn.isClosed())&#13;
     {&#13;
    int UpdateRecordValue&#13;
    Statement statement=conn.createStatement()&#13;
     System.out.println("请选择操作类型：1、按姓名修改 2、按密码修改 3、按网址修改（暂时提供修改密码功能）")&#13;
    UpdateRecordValue=EntryValue.nextInt()&#13;
    switch(UpdateRecordValue){&#13;
    case 1:&#13;
    String SetKeyIDValue&#13;
        System.out.println("请输入要修改密码的用户名：")&#13;
        UpdateUsenameValue=EntryValue.next()&#13;
        System.out.println("请输入新的密码：")&#13;
        SetKeyIDValue=EntryValue.next()&#13;
        UpdateOrderString="update urlinformation set keyid='"+SetKeyIDValue+"' where usename='"+Upd ateUsenameValue+"'"&#13;
        statement.executeUpdate(UpdateOrderString)&#13;
        System.out.println("数据更新完成！！")&#13;
        break&#13;
     case 2:&#13;
        break&#13;
     case 3:&#13;
        break&#13;
    default:&#13;
        System.out.println("输入非法字符！")&#13;
     }&#13;
     }&#13;
    }catch(ClassNotFoundException e){&#13;
     //TODO自动生成catch块&#13;
     e.printStackTrace()&#13;
    }catch(SQLException e){&#13;
     //TODO自动生成catch块&#13;
     e.printStackTrace()&#13;
    }&#13;
    }&#13;
    /*&#13;
    the Program is to delete the database!!!&#13;
    */&#13;
    public void Mysql_ConnectExecute_Delete(String UseNameValue,String KeyIDValue,String UrlinforValue)&#13;
    {&#13;
    String DeleteDriver="com.mysql.jdbc.Driver"&#13;
    String DeleteUseNameValue,DeleteKeyIDValue,DeleteUrlinforValue&#13;
    String DeleteRecordString&#13;
    Scanner EntryValue=new Scanner(System.in)&#13;
    try{&#13;
     Class.forName(DeleteDriver)&#13;
     Connection conn=DriverManager.getConnection(UrlinforValue,UseNameValue,KeyIDValue)&#13;
     if(!conn.isClosed())&#13;
     {&#13;
     int DeleteSelectValue&#13;
    Statement statement=conn.createStatement()&#13;
    System.out.println("请选择操作类型：1、按姓名删除 2、按密码删除 3、按网址删除")&#13;
    DeleteSelectValue=EntryValue.nextInt()&#13;
    switch(DeleteSelectValue){&#13;
    case 1:&#13;
    System.out.println("请输入要删除的用户名：")&#13;
    DeleteUseNameValue=EntryValue.next()&#13;
    DeleteRecordString="delete from urlinformation where usename='"+DeleteUseNameValue+"'"&#13;
     statement.executeUpdate(DeleteRecordString)&#13;
    break&#13;
    case 2:&#13;
    System.out.println("请输入要删除的密码：")&#13;
    DeleteKeyIDValue=EntryValue.next()&#13;
    DeleteRecordString="delete from urlinformation where keyid='"+DeleteKeyIDValue+"'"&#13;
     statement.executeUpdate(DeleteRecordString)&#13;
    break&#13;
    case 3:&#13;
    System.out.println("请输入要删除的网址：")&#13;
    DeleteUrlinforValue=EntryValue.next()&#13;
    DeleteRecordString="delete from urlinformation where urlinfor='"+DeleteUrlinforValue+"'"&#13;
     statement.executeUpdate(DeleteRecordString)&#13;
    break&#13;
    default:&#13;
    System.out.println("输入非法字符！")&#13;
    }&#13;
     }&#13;
     }catch(ClassNotFoundException e){&#13;
   // TODO 自动生成 catch 块&#13;
    e.printStackTrace()&#13;
     }catch(SQLException e){&#13;
   // TODO 自动生成 catch 块&#13;
    e.printStackTrace()&#13;
    System.out.println("语句操作异常！！")&#13;
     }&#13;
  }&#13;
    }&#13;


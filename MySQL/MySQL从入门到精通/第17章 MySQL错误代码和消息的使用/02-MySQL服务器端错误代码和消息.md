### 
  17.1 MySQL服务器端错误代码和消息


<img class="my_markdown" class="h-pic" src="../images/Figure-0405-293.jpg" style="width:87px;  height: 85px; "/> 本节视频教学录像：12分钟

MySQL 5.6是根据MySQL安装目录下的share/errmsg.txt文件来生成include/mysqld_err or.h和include/mysqld_ername.h中的错误定义的。另外，SQLSTATE 的值也是根据share/errmsg.txt文件中的内容来生成include/sql_state.h的。

默认情况下服务器出错代码都是以1开头的,比如: 1371 SQLSTATE: HY000 (ER_RELAY _LOG_FAIL)，该消息的错误代码为1371，该消息表示“清除旧中继日志失败”。

在查看share/errmsg.txt文件时会发现消息信息中包含%d、%ld和%s，%d和%ld代表数值，%s代表字符串，在显示具体信息时它们将被消息值取代。比如：错误代码为1146的错误信息在share/errmsg.txt显示为“Table '%-.192s.%-.192s' doesn't exist”，即“表' '%-.192s.%-.192s'’不存在”。其中，“%-.192s”可表示左对齐192个字符宽度，可理解为此处输出为占位字符串，在显示具体信息时回避字符串消息替换，在附录A中直接表示为“表'%s.%s'不存在”，下面举例说明。

&#13;
    01 mysql> show tables;&#13;
    02 +----------------+&#13;
    03 | Tables_in_xscj |&#13;
    04 +----------------+&#13;
    05|kc      |&#13;
    06|xs      |&#13;
    07|xs_kc     |&#13;
    08|xs_kc_st   |&#13;
    09 +----------------+&#13;
    10 4 rows in set&#13;
    11 mysql> select * from kc;&#13;
    12 +--------+----------------+----------+------+------+&#13;
    13|课程号|课程名    |开课学期|学时|学分|&#13;
    14 +--------+----------------+----------+------+------+&#13;
    15|101  |计算机基础  |    1| 80|  5|&#13;
    16|102  |程序设计与语言|    2| 68|  4|&#13;
    17|206  |离散数学   |    4| 68|  4|&#13;
    18|208  |数据结构   |    5| 68|  4|&#13;
    19|209  |操作系统   |    6| 68|  4|&#13;
    20|210  |计算机原理  |    5| 85|  5|&#13;
    21|212  |数据库原理  |    7| 68|  4|&#13;
    22|301  |计算机网络  |    7| 51|  3|&#13;
    23|302  |软件工程   |    7| 51|  3|&#13;
    24 +--------+----------------+----------+------+------+&#13;
    25 9 rows in set&#13;
    26 mysql> select * from kcx;&#13;
    27 1146 - Table 'xscj.kcx' doesn't exist&#13;

在第01行中查看存在表“kc”，11行查看表kc中所有记录，26行查看不存在的表“kcx”，27行提示服务器错误“1146 - Table 'xscj.kcx' doesn't exist”，对照附录A中服务器错误代码1146，发现其中的%s已经被xscj和kcx替换掉了。


###### 十二、UDP差错检测

`UDP检验和`提供了`差错检测`功能。
`检验和`相当于用于确定当UDP报文段从源到达目的地移动时，其中的比特是否发生了改变（比如，由于链路中的噪声干扰或存储在路由器中时的引入问题）。
发送方的UDP对报文段中的所有16比特字对和进行`反码`运算，求和时遇到的任何溢出都被回卷。得到的结果被放在UDP报文段中的`检验和`字段。

比如，假定有下面三个16比特的字:

``` 
0110011001100000
0101010101010101
1000111100001100
```

这些16比特字的前两个之和是：

```
1011101110110101
```

再将该和与第三个16比特字相加，得出:

```
10100101011000001
```

发现溢出了，该和就要被回卷，即把首位的1加到最后一位去，得出：

```
0100101011000010
```

然后对其进行反码运算，所谓反码运算，即是将所有的1换成0，0换成1

```
1011010100111101
```

这就是得出的检验和。而在接收方，全部的4个16比特字（包括检验和）加在一起。如果分组中没有引入差错，显然在接收处该和将是1111111111111111。而如果这些比特之一是0，那我们就知道该分组中出现了差错。
UDP在`端到端基础上`在运输层提供`差错检测`，这就是在系统设计中被称颂的`端到端原则`

而UDP虽然提供差错检测，但它对差错恢复无能为力。这就需要用到可靠数据传输--TCP了
###### 二十八、IP协议

IP协议是TCP/IP核心协议。

> * 版本号 
规定了数据报的IP协议版本（IPv4还是IPv6）。不同的IP版本使用不同的数据报格式 ，上图是IPv4的数据报格式 
> * 首部长度
> 大多数IP数据报不包含选项，所以一般IP数据报具有20字节的首部。 
>* 服务类型 
>使不同类型的IP数据报能相互区别开来。 
>* 数据报长度
> **整个IP数据报的长度，利用首部长度和总长度就可以是算出IP数据报中数据内容的起始地址**。该字段长度为16比特，所以IP数据报最长可达2^16=65535字节，而事实上，数据报很少有超过1500字节的
> * 标识、标志、片偏移字段 
这三个字段与IP分片有关。此外，IPv6不允许在路由器上对分组分片 
> * 生存时间TTL
> 用来确保数据报不会永远在网络中循环。设置该数据报可以经过的最多的路由器数。指定了数据报的生存时间，经过一个路由器，它的值就减1，当该字段为0时，数据报就被丢弃
> 
> * 协议
> 该字段只有在一个IP数据报到达其目的地才有用。该字段值指示了IP数据报的数据部分应交给哪个特定的传输层协议，比如，值为6表明要交给TCP，而值为17则表明要交给UDP
> 
> * 首部检验和 
与UDP/TCP的检验和不同，这个字段只检验数据报的首部，不包括数据部分。 
>* 选项字段
> 是一个可变长字段，选项字段一直以4字节作为界限。这样就可以保证首部始终是4字节的整数倍。很少被用到 
>* 源IP和目的IP

``` 
记录源IP地址，目的IP地址
```
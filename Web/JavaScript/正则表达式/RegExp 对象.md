[toc]

`RegExp()` 构造函数带有两个字符串参数，其中第二个参数是可选的，`RegExp()` 用以创建新的 `RegExp` 对象。第一个参数包含正则表达式的主体部分，也就是正则表达式直接两种两条斜线之间的文本。需要注意的是，不论是字符串直接量还是正则表达式，都使用 `\` 字符作为转义字符的前缀，因此当给 `RegExp()` 传入一个字符串表达式时，必须将 `\` 替换成 `\\`。`RegExp()`的第二个参数是可选的，如果提供第二个参数，它就指定正则表达式的修饰符。不过只能传入修饰符 `g`、`i`、`m` 或者它们的组合。

```js
// 全局匹配字符串中的 5 个数字，注意这里使用了 "\\"，而不是 "\"
var zipcode = new RegExp("\\d{5}", "g")
```

### 1. `RegExp`的属性

每个 `RegExp`对象都包含 5 个属性。属性 `source` 是一个只读字符串，包含正则表达式的文本。属性 `global` 是一个只读的布尔值，用以说明这个正则表达式是否带有修饰符 `g`。属性 `ignoreCase`也是一个只读的布尔值，用以说明正则表达式是否带有修饰符 `i`。属性 `multiline` 是一个只读的布尔值，用以说明正则表达式是否带有修饰符 `m`。最后一个属性 `lastIndex`，它是一个可读/写的整数。如果匹配模式带有 `g` 修饰符，这个属性存储在整个字符串中下一次检索的开始位置，这个属性会被 `exec()` 和 `test()` 方法用到。

### 2. `RegExp` 的方法

`RegExp` 最主要的执行模式匹配的方法是 `exec()`，它与 String 方法 `match()` 相似，只是 `RegExp` 方法的参数是一个字符串。`exec()`方法对一个指定的字符串执行一个正则表达式，简言之，就是在一个字符串中执行匹配检索。如果它没有找到任何匹配，它就返回 null，但如果它找到了一个匹配，它将返回一个数组。这个数组的第一个元素包含的是与正则表达式相匹配的字符串，余下的元素是与圆括号内的子表达式相匹配的子串。属性 `index` 包含了发生匹配的字符位置，属性 `input` 引用的是正在检索的字符串。

当调用 `exec()` 的正则表达式对象具有修饰符 `g` 时，它将把当前正则表达式对象的 `lastIndex` 属性设置为紧挨着匹配子串的字符位置。当同一个正则表达式第二次调用 `exec()` 时，它将从 `lastIndex` 属性所指示的字符串开始检索。如果 `exec()` 没有发现任何匹配结果，它会将 `lastIndex`重置为 0（在任何时候都可以将 `lastIndex` 属性设置为 0，每当在字符串中找最后一个匹配项后，在使用这个 `RegExp` 对象开始新的字符串查找之前，都应当将 `lastIndex` 设置为 0）。

```js
var pattern = /Java/g;
var text = "JavaScript is more fun than Java!";
var result;
while ((result = pattern.exec(text)) != null) {
    alert("Matched '" + result[0] + "'" + " at position " + result.index + "; next search begins at " + pattern.lastIndex);
}
```

调用 `test()` 和调用 `exec()` 等价，当 `exec()` 的返回结果不是 null 时，`test()` 返回 true.
# 
  关于本书


在考虑写这本书的时候，我们设想的是三分之二的内容关注单页Web应用开发的客户端，其他三分之一的内容关注Web服务器和单页Web应用所需要的服务。但我们无法决定使用何种Web服务器。我们使用Ruby/Rails、Java/Tomcat、mod_perl和其他平台编写过大量的传统网站和单页Web应用网站的服务器，它们都各有缺点，尤其是对单页Web应用的支持有所欠缺，这使得我们想要的更多。

最近我们切换到了“纯”JavaScript栈：Web服务器使用Node.js，数据库使用MongoDB。虽然有挑战，但我们发现这经历是令人解脱和信服的。相同的语言和数据格式的好处意义深远，它们比从“多语言栈”（polyglot-stack）中失去的某种语言功能都更为重要。

迄今为止，我们觉得“纯”JavaScript栈可以向读者提供最大的价值，因为我们知道没有其他书本演示如何把各个部分组合在一起。我们认为这种“纯”JavaScript栈会继续受到欢迎，并成为单页应用最常使用的开发方式。

本书导读

第1章介绍单页应用。这一章会对JavaScript单页应用进行定义，并和其他单页应用进行对比。这一章还会比较传统Web网站和单页应用，并讨论使用单页应用的时机、好处和挑战。在这一章的最后，会指导读者开发一个可用的单页应用。

第2章讲解对构建单页应用必需的JavaScript功能和特性。由于单页应用中的所有代码都使用JavaScript编写，并不是事后为了提供一些用户交互而添加的，所以理解语言是如何工作的就非常重要。这一章会讨论变量、格式和函数，还有其他一些高级主题，如执行环境、闭包和对象原型。

第3章介绍本书使用的单页应用架构，也介绍用户接口主模块Shell。Shell会协调功能模块和浏览器相关的事件和数据（如URL和cookie）。这一章还会实现一种事件处理程序和用来管理页面状态的锚接口模式。

第4章详细讲解功能模块，它向单页应用提供定义良好和有作用域的功能。精心编写的功能模块就相当于第三方JavaScript模块。提倡隔离以确保质量和模块化。

第5章演示如何构建Model模块，它将客户端的所有业务逻辑整合在一个名字空间中。Model 负责数据管理和同服务器的交互，从而隔离客户端。这一章还会设计和开发 People API，使用Fake数据模块和JavaScript控制台对Model进行测试。

第6章完成Model的其他工作。这一章会设计和开发ChatAPI，依然使用 Fake数据模块和JavaScript控制台对它进行测试。这一章会引进Data模块，对应用加以修改，以便使用来自Web服务器的真实数据。

第7章介绍Web服务器Node.js。由于单页应用的大多数代码都在客户端，后端可以用任何语言编写，只要它能很好地满足应用的要求即可。后端使用JavaScript编写，可以使编程环境保持一致，并能简化全栈开发。如果之前从没用过Node.js，那么这是很不错的介绍，即使对于一位经验丰富的Node.js开发者，本章也有一些关于单页应用中服务器所扮演角色的深刻见解。

第8章介绍了数据库。我们使用MongoDB，因它是有产品证明的数据库，按JSON文档来存储数据，客户端使用的也是相同的数据格式。在深入了解单页应用中服务器所扮演的角色之前，我们会向没有使用过MongoDB的人做基本介绍。

第9章讲解一些单页应用概念上的细节，它们不同于传统的MVC Web应用：单页应用的搜索引擎优化、收集单页应用的分析数据和记录单页应用中的错误日志。我们也会讲解一些对于传统Web应用很重要的领域知识，它们对单页应用的开发尤其重要：通过CDN快速提供静态资源内容以及栈的各个层级的缓存。

附录A会非常详细地介绍JavaScript的编码标准，它们对读者可能有用也可能没用，但我们已经发现它们是组织单页应用中的JavaScript代码的宝贵指南，使之易测试、易维护并且非常易读。在这里我们会讲解为什么编码标准很重要，组织代码并为之添加文档，命名变量和方法，保护名字空间，组织文件，以及使用JSLint来验证JavaScript。我们还会提供两张Web页面作为读者编码时的参考。

附录B会讲解单页Web应用的测试。测试单页应用可以另外写本书，但它是一个很重要并且很关键的话题，不容忽视。我们讲解了设置测试模式，选择测试框架，创建测试集，以及修改单页应用的模块以便添加测试设置。

读者群体

本书是为 Web 开发人员、架构师和产品经理编写的，他们至少要有一些 JavaScript、HTML和CSS的开发经验。如果你从来没有接触过Web开发，本书不适合你，但不管怎样还是欢迎购买。有很多非常不错的教初学者开发和设计网站的书，但这一本不是。

希望本书成为很好的设计和构建大规模单页应用的指南，这些应用从前端到后端都使用JavaScript。数据库、Web服务器和浏览器应用所使用的语言都是JavaScript。本书大约三分之二的内容专门讲解客户端，最后三分之一的内容演示如何使用 JavaScript 工具（如Node.js和MongoDB）构建服务器。如果你受限于其他服务器平台，大部分的逻辑应该很容易转化，而通信服务则需要一台事件驱动的Web服务器。

编码规范和下载

出现在代码清单或者正文中的以等宽字体显示的源代码，是用来把它和普通文本分隔开的。代码清单中的注释是强调的重要概念。

本书中的示例源代码可以到 Manning 出版社的网站下载：www.manning.com/SinglePageWebApplications。

软件和硬件需求

如果你使用的是最近的Mac OSX或者是Linux电脑，假如你安装了我们在讲解过程中提到的软件，那么对于本书中的练习，很少或者不会有什么麻烦。

如果你使用的是 Windows，对于本书的第一部分和第二部分内容，很少或者不会有什么麻烦。第三部分内容需要一些Windows上没有或者有限制的工具。我们推荐使用免费可用的虚拟机（请查看 http://www.oracle.com/technetwork/server-storage/virtualbox/downloads /index.html）和 Linux 发行版（推荐 Ubuntu Server 13.04，请查看 http:// www.ubuntu.com/download/server）。

作者在线支持

购买这本书将免费获得Manning出版社运营的私有Web论坛的访问权限，在这里可以对本书提出意见、咨询技术问题和得到作者和其他用户的帮助。在 Web 浏览器中打开www.manning.com/SinglePageWebApplications，可以访问和订阅该论坛。注册之后，页面会提示如何使用论坛，在论坛可以得到哪种帮助，以及需要遵守哪些规则。

Manning会向读者保证提供一个场所，在那里读者之间以及读者和作者之间可以进行一些有意义的交流。但不保证作者会有指定量的参与度，他们对作者在线论坛的贡献是自愿行为（并且是没有报酬的）。我们建议你尝试向作者提有挑战性的问题，以免他们对问题提不起兴趣。

只要本书还在印刷，作者在线论坛和之前存档的问题就可以通过 Manning 出版社的网站访问。




## 
  第4章 添加功能模块


本章涵盖的内容

定义功能模块以及它们是如何融入架构的

比较功能模块和第三方模块

解释分形MVC设计模式和它在架构中的角色

为功能模块创建文件和目录

定义和实现功能模块的API

实现功能模块通常需要的功能

在开始前，你应该已经看完了本书的第1章至第3章。你也应该拥有第3章的项目文件，我们会在它们的基础之上继续构建。建议你把在第3章中创建的所有文件和整个目录结构复制一份，放到新的“chapter_4”目录中，这样就可以在新目录中更新这些文件了。

功能模块向单页应用提供了精心定义和有作用域限制的功能。在本章，我们把在第3章中介绍的聊天滑块的功能移到一个功能模块，并会改进它的功能。除了聊天滑块之外，还有其他功能模块的例子，包括图片查看器、账户管理面板或者是用户集中放置图形对象的工作台。

我们设计的和应用交互的功能模块，和第三方模块的做法很像：精心定义的API和强隔离性。这可以更快地发布，质量也更高，因为我们可以关注创建能增值的核心模块，次要的模块可以交给第三方。这种策略也提供了一种清晰的优化方案，因为只要时间和资源允许，我们就可以有选择性地用更好的模块来替换第三方模块。我们也可以在多个项目之间很容易地重用模块，这是一个额外的好处。


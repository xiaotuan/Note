```shell
#!/usr/bin/env bash
# 文件位置：cmdc/small/platform/on-project/build/build_prop.sh
# begin build properties
# autogenerated by buildinfo.sh
### Get ${PATH} ###
# 获取脚本命令的目录部分
DIR=$(dirname $0)
infofile=$1
FULL_DIR=${DIR/\./$(pwd)}
# 引入 color 和 Read.sh 脚本文件
. ${FULL_DIR}/../../build/color
. ${FULL_DIR}/../../build/Read.sh

BUILD_TYPE=${2}
# 设置 TARGET_BUILD_VARIANT 变量
if [ ${BUILD_TYPE} == "user" -o ${BUILD_TYPE} == "all_user" -o ${BUILD_TYPE} == "l2_user" -o ${BUILD_TYPE} == "cts" ] ; then
TARGET_BUILD_VARIANT=user
else
TARGET_BUILD_VARIANT=eng
fi

BUILD_ID=$(Read_Build_Id ${FULL_DIR}/build_id.mk)
BUILD_NUMBER=$(Read_Build_Number ${FULL_DIR}/build_id.mk)
RELEASE_MODE=$(Read_Value ${FULL_DIR}/build_id.mk  RELEASE_MODE)
OTT_LICENSE=$(Read_Value ${FULL_DIR}/build_id.mk  OTT_LICENSE)
OTT_PLATFORM=$(Read_Value ${FULL_DIR}/build_id.mk  OTT_PLATFORM)
BUILD_NUMBER_SPLIT_LEN=$(Read_Value ${FULL_DIR}/build_id.mk BUILD_NUMBER_SPLIT_LEN)
BUILD_SUPPORT_CMDC_COLLECT=$(Read_Value ${FULL_DIR}/build_id.mk BUILD_SUPPORT_CMDC_COLLECT)
date="$(date)"
dateutc="$(date +%s)"
TARGET_PRODUCT="Hi3798MV300"
PLATFORM_SDK_VERSION="19"
PLATFORM_VERSION="4.4.2"
PRODUCT_BRAND="HiSTBAndroidV5"
TARGET_DEVICE="Hi3798MV300"
BUILD_VERSION_TAGS="test-keys"
#PRODUCT_DEFAULT_LANGUAGE=en
#PRODUCT_DEFAULT_REGION=US
PRODUCT_DEFAULT_LANGUAGE=zh
PRODUCT_DEFAULT_REGION=CN

DISPLAYID="$BUILD_ID ${BUILD_VERSION_TAGS}"
DESCRIPTION="${TARGET_PRODUCT}-${TARGET_BUILD_VARIANT} ${PLATFORM_VERSION} $BUILD_ID $BUILD_NUMBER ${BUILD_VERSION_TAGS}"
BUILD_FINGERPRINT="$PRODUCT_BRAND\/$TARGET_PRODUCT\/$TARGET_DEVICE\:$PLATFORM_VERSION\/$BUILD_ID\/$BUILD_NUMBER\:$TARGET_BUILD_VARIANT\/$BUILD_VERSION_TAGS"

function set_prop()
{
	prop_name=$1
	prop_value=$2

	# 查找 prop_name 对应的属性值
	para=$(awk -v identifier="${prop_name}=" '$0 ~ "^" identifier {print $1}' $infofile)

	if [ "${prop_name}" = "" ];then
		echo "set_prop: Invalid parameter"
	elif [ "${prop_value}" = "" ];then
		# delete prop
		# 删除属性
		sed -i "s/${prop_name}=.*//g" $infofile
	elif [ "${para}" = "" ];then
		# add prop
		# 添加属性
		echo "${prop_name}=${prop_value}" >> $infofile
	else
		# 更新属性
		sed -i "s/${prop_name}=.*/${prop_name}=${prop_value}/g" $infofile
		if [ "$?" != "0" ];then
			red "Error: set_prop ${prop_name} failed!\n"
		fi
	fi
}

#replace the property in build.prop
set_prop "ro.build.id" ""
set_prop "ro.build.version.incremental" "$BUILD_NUMBER"
set_prop "ro.build.date" "$date"
set_prop "ro.build.date.utc" "$dateutc"
set_prop "ro.build.display.id" "$DISPLAYID"
set_prop "ro.build.description" "$DESCRIPTION"
set_prop "ro.build.fingerprint" "$BUILD_FINGERPRINT"
set_prop "ro.build.devicemodel" "$BUILD_ID"
set_prop "ro.product.model" "$BUILD_ID"
set_prop "ro.product.name" "$TARGET_DEVICE"
set_prop "ro.product.device" "$TARGET_DEVICE"
set_prop "ro.build.product" "$TARGET_DEVICE"
set_prop "ro.build.equipment" "$BUILD_ID"
set_prop "ro.product.locale.language" "$PRODUCT_DEFAULT_LANGUAGE"
set_prop "ro.product.locale.region" "$PRODUCT_DEFAULT_REGION"
set_prop "ro.build.user" "$USER"
set_prop "ro.build.host" "`hostname`"
set_prop "ro.flash.size" "8GB"
set_prop "ro.chip.type" ${TARGET_DEVICE}
set_prop "ro.product.target" "telecom"
set_prop "ro.factory.name" "CMDC"
set_prop "ro.product.manufacturer" "CMDC"
set_prop "ro.factory.oui" "FF0001"
set_prop "android.os.Build.VERSION.INCREMENTAL" "${PRODUCT_BRAND} ${BUILD_ID} $BUILD_NUMBER"
set_prop "android.os.Build.BRAND" "${PRODUCT_BRAND}"
set_prop "android.os.Build.BOARD" "HISI-3798MV300"
set_prop "android.os.Build.MANUFACTURER" "${PRODUCT_BRAND}"
set_prop "android.os.Build.MODEL" "${BUILD_ID}"
set_prop "android.os.Build.VERSION.SDK" "$PLATFORM_SDK_VERSION"
set_prop "sys.wifidisplay.platform" "HisiWifiDisplay"
set_prop "ro.build.version.hwincremental" "${PRODUCT_BRAND} ${BUILD_ID} $BUILD_NUMBER"
set_prop "sys.platform.media" "hisi"
set_prop "persist.sys.standby.network" "0"
set_prop "persist.sys.optimalfmt.enable" "0"
set_prop "persist.sys.country" "$PRODUCT_DEFAULT_REGION"
set_prop "persist.sys.language" "$PRODUCT_DEFAULT_LANGUAGE"
set_prop "persist.sys.timezone" "Asia\/Shanghai"
set_prop "persist.sys.cvbs.and.hdmi" "false"
set_prop "persist.sys.hw.spdif" "0"
set_prop "persist.sys.audio.audiorender" "17"
set_prop "persist.sys.mount.delay" "true"
set_prop "ro.sdcardfs.support" "true"
set_prop "persist.sys.edid_get" "enable"
if [ ${BUILD_TYPE} == "user" ] ; then
set_prop "persist.sys.secureline" "0"
set_prop "persist.sys.usb.config" "none"
set_prop "persist.sys.ui.hw" "false"
else
set_prop "persist.sys.secureline" "0"
set_prop "persist.sys.usb.config" "none"
fi
set_prop "epg.launcher.packagename" "net.sunniwell.guide"
set_prop "epg.launcher.classname" "net.sunniwell.guide.activity.MainActivity"
set_prop "ro.default.launcher.activity" "net.sunniwell.guide.activity.MainActivity"
set_prop "ro.standby.action" "net.sunniwell.action.POWER_WINDOW_SERVICE"
set_prop "ro.build.operator" "1"
set_prop "ro.build.hard" "cmdc"
set_prop "sys.project.customize" "1"
set_prop "persist.sys.win.switch.black" "false"
set_prop "service.media.hiplayer.vdecerr" "100"
set_prop "sys.wipedata" "63"
set_prop "persist.sys.softdetect.name" "mobile"
set_prop "persist.sys.player.cache.high" "3000"
set_prop "media.hiplayer.prerolltime" "1500"
set_prop "media.hiplayer.syncsmooth" "false"
set_prop "ro.delay.sendkey.time" "500"
set_prop "sys.hisi.ntp.enable"  "false"
set_prop "persist.sys.video.quality" "2"
set_prop "persist.sys.apphandle" "true"
set_prop "net.dhcpc.time" "9[1,2,1,1,2,1,1,2,1]"
set_prop "dalvik.vm.heapstartsize" "16m"
set_prop "dalvik.vm.heapgrowthlimit" "128m"
set_prop "dalvik.vm.heapsize" "256m"
set_prop "dalvik.vm.heapminfree" "2m"
set_prop "dalvik.vm.heapmaxfree" "8m"
set_prop "net.ether.wifi.same_segment" "1"
set_prop "persist.sys.ctc.quickoutput" "1"
set_prop "persist.sys.ctc.presynctimeout" "1000"
set_prop "persist.sys.ctc.errcover.fisfrm" "100"
set_prop "persist.sys.ctc.errcover.fast" "100"
set_prop "persist.sys.ctc.errcover.seek" "100"
set_prop "persist.sys.ctc.errcover.spfast" "100"
set_prop "persist.sys.ctc.errcover.resume" "100"
set_prop "ro.hs.security.l1.enable" "false"
set_prop "persist.ethernet.vlan.enabled" "false"
set_prop "persist.ethernet.vlanid" "0"
set_prop "persist.low_ram.wp.enable" "true"
set_prop "ro.config.low_ram"  "true"
set_prop "persist.sys.player.bufmaxsize" "80"
set_prop "persist.hisi.media.hp.buf.seek" "disable"
set_prop "persist.hisi.media.hp.lbuf.min" "0"
set_prop "persist.sys.bootanim.playmode" "loop"
set_prop "persist.sys.hdmi.cec" "false"
set_prop "persist.sys.media.uvmos" "false"
if [[ ${infofile##*/} == "default.prop" ]]
then 
	set_prop "ro.support.sampkg" ""
	set_prop "ro.revert.support" ""
fi
set_prop "ro.bt_init.enable" ""
set_prop "persist.sys.app.silentInstaller" "true"
set_prop "persist.sys.app.installerStart" "true"
set_prop "persist.sys.ipv6.disable" "0"
set_prop "ro.sw.product.deviceType" "10"
set_prop "ro.sw.product.brand" "CMCC"
set_prop "ro.sw.product.factory" "CMDC"
set_prop "ro.sw.product.odm" "202"
set_prop "ro.sw.product.chip.model" "${TARGET_DEVICE}"
set_prop "ro.proudct.license.code" "699217"
set_prop "ro.product.province.code" "16"
#优先走ipv4
#set_prop "media.hp.net.preferedipver" "4"
#不支持ipv6
set_prop "persist.sys.ipv6.disable" "1"
set_prop "media.hp.ipv6" "false"

```


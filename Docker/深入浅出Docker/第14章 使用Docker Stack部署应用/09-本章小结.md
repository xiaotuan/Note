## 14.4　本章小结

Stack是Docker原生的部署和管理多服务应用的解决方案。Stack默认集成在Docker引擎中，并且提供了简单的声明式接口对应用进行部署和全生命周期管理。

在本章开始提供了应用代码以及一些基础设施需求，比如网络、端口、卷和密钥。接下来的内容完成了应用的容器化，并且将全部应用服务和基础设施需求集成到一个声明式的Stack文件当中。在Stack文件中设置了服务副本数、滚动升级以及重启策略。然后通过 `docker stack deploy` 命令基于Stack文件完成了应用的部署。

对于已部署应用的更新操作，应当通过修改Stack文件完成。首先需要从源码管理系统中检出Stack文件，更新该文件，然后重新部署应用，最后将改动后的Stack文件重新提交到源码控制系统中。

因为Stack文件中定义了像服务副本数这样的内容，所以读者需要自己维护多个Stack文件以用于不同的环境，比如dev、test以及prod。



![20200219C2000202.jpg](./images/20200219C2000202.jpg)

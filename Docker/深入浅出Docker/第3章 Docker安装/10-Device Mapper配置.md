### 3.6.1　Device Mapper配置

大部分Linux存储驱动不需要或需要很少的配置。但是， `Device Mapper` 通常需要合理配置之后才能表现出良好的性能。

默认情况下， `Device Mapper` 采用loopback mounted sparse file作为底层实现来为Docker提供存储支持。如果读者需要的是开箱即用并且对性能没什么要求，那么这种方式是可行的。但这并不适用于生产环境。实际上，默认方式的性能很差，并不支持生产环境。

为了达到 `Device Mapper` 在生产环境中的最佳性能，读者需要将底层实现修改为 `direct-lvm` 模式。这种模式下通过使用基于裸块设备（Raw Block Device）的LVM精简池（LVM thin pool）来获取更好的性能。

在Docker 17.06以及更高的版本中可以配置 `direct-lvm` 作为存储驱动。但是在本书撰写时，该方式存在某种限制。其中最主要的一点是，这种方式只能配置一个块设备，并且只有在第一次安装后才能设置生效。未来可能会有改进，但就目前情况来看配置单一块设备这种方式在性能和可靠性上都有一定的风险。


### 1.4 代码的风格

#### 1.4.1 变量的命名

（1）变量名应简短且富于描述。变量名的选用应该易于记忆，即能够指出其用途。

（2）变量的名字应该是非形式的、简单的、容易记忆的。变量的作用越大，它的名字要携带的信息就该越多，全局变量应该受到更多的注意。本书规定的变量命名规则为：[限定范围的前缀]+[数据类型前缀]+[有意义的单词]。这一规定的应用举例如下。

```c
#define MAX_BUFFER 256	// 定义一个常量，一般常量名应全大写
char g_szTitle[MAX_BUFFER];		// g_ 前缀表示全局变量，sz 表示类型为字符串， title 是标题的意思
int m_nErrorCode;	// m_ 前缀表示类的成员变量，n 表示类型为长整型，error code 是错误代码的意思
BOOL bResult;	// 变量默认即为局部变量，故无需任何限定范围的前缀，b 表示类型为布尔型
```

（3）作为非明文的规定，局部变量应用小写字母（如 I、j），常量名应全大写（如 MAX_BUFFER），函数名应该写为动作性的（如 CreateDirectory），结构名（类名）应该带有整体性（如 class CRaster）。

#### 1.4.2  代码的对齐方式

"{"、"}" 表示一个块，是一个相对独立的语义单元。代码的行与行之间应该按块对齐，而各块之间又应当有适当的缩进，如下面代码所示。

```c
void Alert(int i)
{
    while (i > 0) 
    {
        // Beep 函数会使扬声器发出简单的声音
        // 要调用这个函数你应该包含上头文件 "windows.h"
        Beep(1000,1000);
        i--;
    }
}
```

一般在分隔参数、赋值语句和表达式等需要清晰明了的地方使用空格，如下面代码所示。

```c
MessageBox(NULL, L"Hello, Windows XP", "Greetings", MB_OKCANCEL);	// 用空格分割参数
int i = 10 * (123 + 100 / 5);	// 用空格分割赋值语句
if ((a > b) && (c < b) && (e == f))		// 用空格分割表达式等
....
```

在编辑环境下，只要选中待整理的代码，按快捷键 <kbd>Alt</kbd>+<kbd>F8</kbd>，Visual Studio 就会自动将所选取的代码整理成 Microsoft 的 CPP 格式。

#### 1.4.3  代码的注释

极短的注释可以与它们所要描述的代码位于同一行，但是应该有足够的空白来分开代码和注释。多个短注释出行于大段代码中时，它们应该具有相同的缩进。如下面的代码所示。

```c
HANDLE hThread = ::CreateThread(......);
if (hThread == NULL)
{
    return FALSE;	// 失败！
} else {
    return TRUE;	// 成功！
}
```

如果注释内容比较长，就应该将注释写在所要注释的语句的上面。

```c
// 调整 m_nMax 的值，以便为各线程的私有数据分配内存
if (nSlot >= m_nMax)
{
    m_nMax = mSlot + 1;
}

m_pSlotData[mSlot].dwFlags |= SLOT_USED;
// 更新 m_nRover 的值（我们假定下一个槽未被使用）
m_nRover = nSlot + 1;
```

本书规定，所有的注释一律采用注释界定符 "//"，而不使用 "/**/" 的注释方法，且符号 "//" 和注释语句间要有一个空格隔开。
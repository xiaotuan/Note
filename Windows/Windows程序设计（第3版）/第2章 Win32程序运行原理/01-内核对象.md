### 2.2 内核对象

#### 2.2.2 对象句柄

内核对象的数据结构仅能够从内核模式访问，所以直接在内存中定位这些数据结构对应用程序来说是不可能的。应用程序必须使用 API 函数访问内核对象。调用函数创建内核对象时，函数会返回表示此内核对象的句柄。可以想象此句柄是一个能够被进程中任何线程使用的一个不透明的值，许多 API 函数需要以它作为参数，以便系统知道要操作哪一个内核对象。

为了使系统稳定，这些句柄是进程相关的，也就是仅对创建该内核对象的进程有效。如果将一个句柄值通过某种机制传给其他线程中的线程，那么，该线程以此句柄为参数调用相关函数时就会失败。

当然，多个进程共享一个内核对象也是可能的，调用 DuplicateHandle 函数复制一个进程句柄传给其他进程即可。

#### 2.2.3 使用计数

内核对象时进程内的资源，使用计数属性指明进程对特定内核对象的引用次数，当系统发现引用次数是 0 时，它就会自动关闭资源。


[toc]

## 1.5　Node、V8和ES6

Node背后有一套JavaScript引擎。大多数JavaScript的实现使用的引擎是V8。V8最初是由Google为Chrome开发的，在2008年开源了。V8引擎是为了提高JavaScript的运行速度而创建的，它使用一个即时编译器（JIT）将JavaScript编译成机器代码而不是翻译它（多年来，JavaScript一直是这样被执行的）。V8引擎是用C++编写的。

> <img class="my_markdown" src="./images/24.png" style="width:99px;  height: 131px; " width="10%"/>
> **微软的Node.js分支**
> Microsoft为Node创建了一个分支，以创建一个专门为物联网（IoT）设计的JavaScript引擎（名为Chakra）版本。我将在第12章中详细地介绍这个分支。

Node v4.0发布的时候支持了V8 4.5（也就是Chrome所使用的引擎版本）。Node维护者也一直致力于在每个新版V8发布后提供支持。这意味着Node现在支持许多新的ECMA-262功能（也称为ECMAScript 2015或ES6）。

> <img class="my_markdown" src="./images/25.png" style="width:99px;  height: 131px; " width="10%"/>
> **Node v6的V8支持**
> Node v6支持V8 5.0版本，而未来的Node版本也会支持对应的新版V8。

在旧版Node中，要使用ES6的新特性，你需要在运行程序时加上 `harmony` 参数（ `--harmony` ）：

```python
node --harmony app.js
```

现在，ES6新特性的支持基于以下几个标准（引用自Node.js文档）。

+ 所有V8认为稳定的已交付功能，在Node.js中都可以直接使用，不需要任何运行时的参数。
+ 待交付功能，也就是已经开发完毕，但是V8团队认为还不够稳定的功能，需要一个运行时参数： `--es_staging` （或者它的同义词 `--harmony` ）。
+ 开发中的功能可以使用每个功能对应的参数来开启（如 `--harmony_destructuring` ），但是不建议这样做，除非是用于测试。

我将会在第9章讲解Node对ES6的支持，以及如何高效地使用各项功能。现在，你可以快速了解一下以下内容，它们是Node所支持的ES6功能的一部分。

+ 类
+ `Promises` 对象
+ 符号
+ 箭头函数
+ `Generator` 函数
+ 数组
+ `let` 关键字
+ `spread` 操作符


字符 “|” 用于分隔供选择的字符。例如，`/ab|cd|ef/` 可以匹配字符串 "ab"，也可以匹配字符串 "cd"，还可以匹配字符串 "ef"。

> 注意：
> 选择项的尝试匹配次序是从左到右的，直到发现了匹配项。如果左边的选择项匹配，就忽略右边的匹配项，即使它产生更好的匹配。因此，当正则表达式 `/a|ab/` 匹配字符串 "ab" 时， 它只能匹配第一个字符。

正则表达式中的圆括号有多种作用。一个作用是吧单独的项组合成子表达式，以便可以像处理一个独立的单元那样用 "|"、"\*"、"+" 或者 "?" 等来对单元内的项进行处理。例如， `/(ab|cd)+|ef/` 可以匹配字符串 "ef"，也可以匹配字符串 "ab" 或 "cd" 的一次或多次重复。

圆括号的另一个作用是在完整的模式中定义子模式。当一个正则表达式成功地和目标字符串相匹配时，可以从目标串中抽出和圆括号中的子模式相匹配的部分。例如，假定我们正在检索的模式是一个或多个小写字母后面跟随了一位或多位数字，则可以使用模式 `/[a-z]+\\d+/`。但假定我们真正关心的是每个匹配尾部的数字，那么如果将模式的数字部分放在括号中（`/[a-z]+(\\d+)/`），就可以从检索到的匹配中抽取数字了。

带圆括号的表达式的另一个用途是允许在同一正则表达式的后部引用前面的子表达式。这是通过在字符 "\" 后加一位或多位数字来实现的。这个数字指定了带圆括号的子表达式在正则表达式中的位置。例如，\\1 引用的是第一个带圆括号的子表达式，\\3 引用的是第三个圆括号的子表达式。注意，因为子表达式可以嵌套另一个子表达式，所以它的位置是参与计数的左括号的位置。例如，下面的正则表达式中，嵌套的子表达式（[Ss]script）可以用 \\2 来指代：

```
/([Jj]ava([Ss]cript)?) \sis\s(fun\w*)/
```

如果要匹配左侧和右侧的引号，可以使用如下的引用：

```
/(['"])[^'"]*\1/
```

在这个例子中，存在这样一条约束，那就是左侧的引号必须和右侧的引号相匹配。正则表达式不允许用双引号括起的内容中有单引号。不能在字符类中使用这种引用，所以下面的写法是非法的：

```
/(['"])[^\1]*\1/
```

在正则表达式中不用创建带数字编码的引用，也可以对子表达式进行分组。它不是以 "(" 和 ")" 进行分组，而是以 "(?:" 和 ")" 来进行分组（不作为引用），比如，考虑下面这个模式：

```
/([Jj]ava(?:[Ss]cript)?)\sis\s(fun\w*)/
```

这里，子表达式 (?:[Ss]cript) 仅仅用于分组，因此复制符号 "?" 可以应用到各个分组。这种改进的圆括号并不生成引用，所以在这个正则表达式中，\2 引用了与 (fun\W*) 匹配的文本。

<center>正则表达式的选择、分组和引用字符</center>
| 字符 | 含义 |
| :- | :- |
| \| | 选择，匹配的是该符号左边的子表达式或右边的子表达式 |
| (...) | 组合，将几个项组合为一个单元，这个单元可通过 "\*"、"+"、"?" 和 "|" 等符号加以修饰，而且可以记住和这个组合相匹配的字符串以供此后的引用使用 |
| (?:...) | 只组合，把项组合到一个单元，但不记忆与该组相匹配的字符 |
| \\n | 和第 n 个分组第一次匹配的字符相匹配，组是圆括号中的子表达式（也有可能是嵌套的），组索引是从左到右的左括号数，"(?:" 形式的分组不编码 |